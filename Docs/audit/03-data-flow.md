# MATRIX Studio æ•°æ®æµæ–‡æ¡£

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0
**åŸºå‡†ä»£ç ç‰ˆæœ¬**: v0.3.8
**ç”Ÿæˆæ—¥æœŸ**: 2025-12-30
**æ–‡æ¡£æ€§è´¨**: çœŸå®ä»£ç å®¡è®¡ç»“æœ

---

## ğŸ“Œ æ–‡æ¡£è¯´æ˜

æœ¬æ–‡æ¡£åŸºäº **MATRIX Studio v0.3.8** å®é™…ä»£ç åº“æ‰«æç”Ÿæˆï¼Œå®Œæ•´è¿½è¸ªç”¨æˆ·æ“ä½œåˆ°æ•°æ®æŒä¹…åŒ–çš„çœŸå®æ•°æ®æµè½¬è·¯å¾„ã€‚

**æ–‡æ¡£èŒƒå›´**ï¼š
1. **ç”¨æˆ·äº¤äº’æµç¨‹**ï¼šä» UI æ“ä½œåˆ° IPC è°ƒç”¨
2. **æœåŠ¡å±‚å¤„ç†**ï¼šä¸»è¿›ç¨‹æœåŠ¡çš„æ•°æ®å¤„ç†é€»è¾‘
3. **æ•°æ®æŒä¹…åŒ–**ï¼šæ–‡ä»¶ç³»ç»Ÿå†™å…¥å’Œç´¢å¼•æ›´æ–°
4. **äº‹ä»¶é€šçŸ¥**ï¼šçŠ¶æ€å˜æ›´å’ŒUIæ›´æ–°

âš ï¸ **é‡è¦æç¤º**ï¼šæœ¬æ–‡æ¡£åæ˜ çš„æ˜¯**å½“å‰çœŸå®æƒ…å†µ**ï¼ŒåŸºäºä»£ç æ‰«æè€Œéè®¾è®¡æ–‡æ¡£ã€‚æ‰€æœ‰æµç¨‹å‡å·²éªŒè¯ä»£ç å®ç°ã€‚

---

## ä¸€ã€æ ¸å¿ƒæ•°æ®æµæ¦‚è§ˆ

### 1.1 æ•°æ®æµåˆ†å±‚æ¨¡å‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 1 å±‚ï¼šç”¨æˆ·äº¤äº’å±‚                          â”‚
â”‚                   (æ¸²æŸ“è¿›ç¨‹ - React ç»„ä»¶)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ç”¨æˆ·æ“ä½œ â†’ React ç»„ä»¶çŠ¶æ€æ›´æ–° â†’ äº‹ä»¶å¤„ç†å‡½æ•°                 â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šç”¨æˆ·ç‚¹å‡»"æ–°å»ºé¡¹ç›®"æŒ‰é’® â†’ handleCreateProject()         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 2 å±‚ï¼šIPC è°ƒç”¨å±‚                         â”‚
â”‚                   (æ¸²æŸ“è¿›ç¨‹ - electronAPI)                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è°ƒç”¨ window.electronAPI.{module}.{method}()                â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šwindow.electronAPI.createProject(name, template)      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 3 å±‚ï¼šIPC é€šä¿¡å±‚                         â”‚
â”‚                   (é¢„åŠ è½½è„šæœ¬ - contextBridge)                â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ipcRenderer.invoke('{module}:{action}', ...args)           â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šipcRenderer.invoke('project:create', name, template) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 4 å±‚ï¼šIPC å¤„ç†å±‚                         â”‚
â”‚                   (ä¸»è¿›ç¨‹ - ipcMain.handle)                  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ipcMain.handle('{module}:{action}', async (_, ...args))   â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šipcMain.handle('project:create', async (_, name, ...) â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 5 å±‚ï¼šæœåŠ¡å±‚                             â”‚
â”‚                   (ä¸»è¿›ç¨‹ - Services)                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  è°ƒç”¨ç›¸åº”çš„æœåŠ¡æ–¹æ³•ï¼Œæ‰§è¡Œä¸šåŠ¡é€»è¾‘                              â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šprojectManager.createProject(name, template)          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 6 å±‚ï¼šæ•°æ®æŒä¹…åŒ–å±‚                        â”‚
â”‚                   (æ–‡ä»¶ç³»ç»Ÿã€ç´¢å¼•ã€æ•°æ®åº“)                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  å†™å…¥æ–‡ä»¶ç³»ç»Ÿã€æ›´æ–°ç´¢å¼•ã€è®°å½•æ—¥å¿—                              â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šå†™å…¥ WorkSpace/projects/{id}/project.json             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   ç¬¬ 7 å±‚ï¼šäº‹ä»¶é€šçŸ¥å±‚                         â”‚
â”‚                   (ä¸»è¿›ç¨‹ â†’ æ¸²æŸ“è¿›ç¨‹)                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  BrowserWindow.webContents.send('event:*', data)            â”‚
â”‚                                                              â”‚
â”‚  ç¤ºä¾‹ï¼šé€šçŸ¥æ¸²æŸ“è¿›ç¨‹é¡¹ç›®åˆ—è¡¨å·²æ›´æ–°                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äºŒã€A1 é¡¹ç›®ç®¡ç†æ•°æ®æµ

### 2.1 åˆ›å»ºé¡¹ç›®æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ Dashboard é¡µé¢ç‚¹å‡»"æ–°å»ºé¡¹ç›®"ï¼Œå¡«å†™é¡¹ç›®åç§°å¹¶é€‰æ‹©æ¨¡æ¿

#### å®Œæ•´æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 1 å±‚ï¼šç”¨æˆ·äº¤äº’å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ç»„ä»¶ï¼šDashboard.tsx (è¡Œ 85-120)                            â”‚
â”‚  1. ç”¨æˆ·ç‚¹å‡»"æ–°å»ºé¡¹ç›®"æŒ‰é’®                                   â”‚
â”‚  2. æ‰“å¼€ Modalï¼Œæ˜¾ç¤ºé¡¹ç›®åç§°è¾“å…¥æ¡†å’Œæ¨¡æ¿é€‰æ‹©å™¨               â”‚
â”‚  3. ç”¨æˆ·è¾“å…¥åç§°ï¼š"æˆ‘çš„å°è¯´è½¬è§†é¢‘é¡¹ç›®"                       â”‚
â”‚  4. é€‰æ‹©æ¨¡æ¿ï¼š"novel-to-video"                              â”‚
â”‚  5. ç‚¹å‡»"åˆ›å»º"æŒ‰é’®                                          â”‚
â”‚     â†“                                                       â”‚
â”‚  6. è§¦å‘äº‹ä»¶å¤„ç†å‡½æ•°ï¼šhandleCreateProject()                 â”‚
â”‚     - éªŒè¯é¡¹ç›®åç§°ï¼ˆéç©ºæ£€æŸ¥ï¼‰                               â”‚
â”‚     - è°ƒç”¨ API                                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 2 å±‚ï¼šIPC è°ƒç”¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  è°ƒç”¨ä½ç½®ï¼šDashboard.tsx (è¡Œ 95)                            â”‚
â”‚  ```typescript                                              â”‚
â”‚  const project = await window.electronAPI.createProject(    â”‚
â”‚    projectName,                                             â”‚
â”‚    selectedTemplate  // 'novel-to-video'                   â”‚
â”‚  );                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 3 å±‚ï¼šIPC é€šä¿¡å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æ–‡ä»¶ï¼šsrc/preload/index.ts (è¡Œ 78)                         â”‚
â”‚  ```typescript                                              â”‚
â”‚  contextBridge.exposeInMainWorld('electronAPI', {           â”‚
â”‚    createProject: (name, template) =>                       â”‚
â”‚      ipcRenderer.invoke('project:create', name, template)   â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  IPC é€šé“ï¼š'project:create'                                 â”‚
â”‚  å‚æ•°ï¼š['æˆ‘çš„å°è¯´è½¬è§†é¢‘é¡¹ç›®', 'novel-to-video']               â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 4 å±‚ï¼šIPC å¤„ç†å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æ–‡ä»¶ï¼šsrc/main/index.ts (è¡Œ 321)                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  ipcMain.handle('project:create',                           â”‚
â”‚    async (_, name: string, template?: string) => {          â”‚
â”‚      logger.info('åˆ›å»ºé¡¹ç›®', { name, template });           â”‚
â”‚      try {                                                  â”‚
â”‚        const project = await projectManager.createProject(  â”‚
â”‚          name,                                              â”‚
â”‚          template                                           â”‚
â”‚        );                                                   â”‚
â”‚        return project;                                      â”‚
â”‚      } catch (error) {                                      â”‚
â”‚        logger.error('åˆ›å»ºé¡¹ç›®å¤±è´¥', { error });             â”‚
â”‚        throw error;                                         â”‚
â”‚      }                                                      â”‚
â”‚    }                                                        â”‚
â”‚  );                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 5 å±‚ï¼šæœåŠ¡å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æœåŠ¡ï¼šProjectManager (src/main/services/ProjectManager.ts)â”‚
â”‚  æ–¹æ³•ï¼šcreateProject(name, template)                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 1ï¼šæ—¶é—´éªŒè¯                                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  await this.timeService.validateTimeIntegrity();           â”‚
â”‚  const currentTime = await this.timeService.getCurrentTime();â”‚
â”‚  ```                                                        â”‚
â”‚  â†’ è·å–ç»è¿‡ NTP éªŒè¯çš„æ—¶é—´æˆ³                                â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 2ï¼šç”Ÿæˆé¡¹ç›® ID                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  const projectId = uuidv4();                                â”‚
â”‚  // ç¤ºä¾‹ï¼š'550e8400-e29b-41d4-a716-446655440000'           â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 3ï¼šç¡®å®šå·¥ä½œåŒºè·¯å¾„                                      â”‚
â”‚  ```typescript                                              â”‚
â”‚  const config = await this.configManager.get();            â”‚
â”‚  const workspacePath = config.general.workspacePath ||     â”‚
â”‚                        './WorkSpace';                       â”‚
â”‚  const projectPath = path.join(workspacePath, 'projects',  â”‚
â”‚                                projectId);                  â”‚
â”‚  // E:\Projects\Matrix\WorkSpace\projects\550e8400-...     â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 4ï¼šåˆ›å»ºé¡¹ç›®ç›®å½•                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  await fs.mkdir(projectPath, { recursive: true });         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 5ï¼šæ„å»ºé¡¹ç›®é…ç½®å¯¹è±¡                                    â”‚
â”‚  ```typescript                                              â”‚
â”‚  const projectConfig: ProjectConfig = {                    â”‚
â”‚    id: projectId,                                          â”‚
â”‚    name: 'æˆ‘çš„å°è¯´è½¬è§†é¢‘é¡¹ç›®',                              â”‚
â”‚    path: projectPath,                                      â”‚
â”‚    createdAt: new Date(currentTime),                       â”‚
â”‚    updatedAt: new Date(currentTime),                       â”‚
â”‚    settings: {                                             â”‚
â”‚      defaultWorkflow: template || 'workflow',              â”‚
â”‚      outputFormat: 'mp4',                                  â”‚
â”‚      quality: 'high'                                       â”‚
â”‚    },                                                      â”‚
â”‚    workflows: [],                                          â”‚
â”‚    assets: [],                                             â”‚
â”‚    // Phase 9 æ–°å¢å­—æ®µ                                     â”‚
â”‚    workflowType: template,  // 'novel-to-video'           â”‚
â”‚    pluginId: template,                                     â”‚
â”‚    currentWorkflowInstanceId: undefined,                   â”‚
â”‚    status: 'in-progress',                                  â”‚
â”‚    inputAssets: [],                                        â”‚
â”‚    outputAssets: [],                                       â”‚
â”‚    immutable: false                                        â”‚
â”‚  };                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 6ï¼šåº”ç”¨é¡¹ç›®æ¨¡æ¿                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  if (template === 'novel-to-video') {                      â”‚
â”‚    // åˆ›å»ºé»˜è®¤çš„å·¥ä½œæµ JSON æ–‡ä»¶                            â”‚
â”‚    const workflowPath = path.join(projectPath,             â”‚
â”‚                                   'workflow.json');         â”‚
â”‚    const defaultWorkflow = {                               â”‚
â”‚      id: uuidv4(),                                         â”‚
â”‚      type: 'novel-to-video',                               â”‚
â”‚      name: 'å°è¯´è½¬è§†é¢‘å·¥ä½œæµ',                              â”‚
â”‚      steps: [                                              â”‚
â”‚        { id: 'chapter-split', name: 'ç« èŠ‚æ‹†åˆ†' },          â”‚
â”‚        { id: 'scene-character', name: 'åœºæ™¯è§’è‰²æå–' },    â”‚
â”‚        { id: 'storyboard', name: 'åˆ†é•œè„šæœ¬ç”Ÿæˆ' },         â”‚
â”‚        { id: 'voiceover', name: 'é…éŸ³ç”Ÿæˆ' },              â”‚
â”‚        { id: 'export', name: 'å¯¼å‡º' }                      â”‚
â”‚      ]                                                     â”‚
â”‚    };                                                      â”‚
â”‚    await fs.writeFile(workflowPath,                        â”‚
â”‚                       JSON.stringify(defaultWorkflow, null, 2));â”‚
â”‚  }                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 6 å±‚ï¼šæ•°æ®æŒä¹…åŒ–å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 7ï¼šå†™å…¥é¡¹ç›®é…ç½®æ–‡ä»¶                                    â”‚
â”‚  ```typescript                                              â”‚
â”‚  const configPath = path.join(projectPath, 'project.json');â”‚
â”‚  await fs.writeFile(                                        â”‚
â”‚    configPath,                                             â”‚
â”‚    JSON.stringify(projectConfig, null, 2),                 â”‚
â”‚    'utf-8'                                                 â”‚
â”‚  );                                                        â”‚
â”‚  ```                                                        â”‚
â”‚  æ–‡ä»¶ä½ç½®ï¼š                                                  â”‚
â”‚  E:\Projects\Matrix\WorkSpace\projects\                    â”‚
â”‚    550e8400-e29b-41d4-a716-446655440000\                   â”‚
â”‚    project.json                                            â”‚
â”‚                                                             â”‚
â”‚  æ–‡ä»¶å†…å®¹ç¤ºä¾‹ï¼š                                              â”‚
â”‚  ```json                                                    â”‚
â”‚  {                                                          â”‚
â”‚    "id": "550e8400-e29b-41d4-a716-446655440000",          â”‚
â”‚    "name": "æˆ‘çš„å°è¯´è½¬è§†é¢‘é¡¹ç›®",                            â”‚
â”‚    "path": "E:\\Projects\\Matrix\\WorkSpace\\projects\\...",â”‚
â”‚    "createdAt": "2025-12-30T10:30:00.000Z",               â”‚
â”‚    "updatedAt": "2025-12-30T10:30:00.000Z",               â”‚
â”‚    "settings": { ... },                                    â”‚
â”‚    "workflowType": "novel-to-video",                       â”‚
â”‚    "status": "in-progress",                                â”‚
â”‚    "inputAssets": [],                                      â”‚
â”‚    "outputAssets": [],                                     â”‚
â”‚    "immutable": false                                      â”‚
â”‚  }                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 8ï¼šæ›´æ–°é¡¹ç›®ç¼“å­˜                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  this.projectCache.set(projectId, projectConfig);          â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 9ï¼šè®°å½•æ—¥å¿—                                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  logger.info('é¡¹ç›®åˆ›å»ºæˆåŠŸ', {                              â”‚
â”‚    projectId,                                              â”‚
â”‚    name: projectConfig.name,                               â”‚
â”‚    template                                                â”‚
â”‚  });                                                       â”‚
â”‚  ```                                                        â”‚
â”‚  â†’ å†™å…¥æ—¥å¿—æ–‡ä»¶ï¼šlogs/matrix-{date}.log                    â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 7 å±‚ï¼šè¿”å›å“åº” â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  è¿”å›åˆ° IPC å¤„ç†å™¨ â†’ è¿”å›åˆ°æ¸²æŸ“è¿›ç¨‹                          â”‚
â”‚  è¿”å›å€¼ï¼šprojectConfig (ProjectConfig å¯¹è±¡)                 â”‚
â”‚                                                             â”‚
â”‚  æ¸²æŸ“è¿›ç¨‹å¤„ç† (Dashboard.tsx)ï¼š                             â”‚
â”‚  1. å…³é—­ Modal                                             â”‚
â”‚  2. æ˜¾ç¤ºæˆåŠŸ Toastï¼š                                        â”‚
â”‚     showToast('success', `é¡¹ç›®"${project.name}"åˆ›å»ºæˆåŠŸï¼`) â”‚
â”‚  3. åˆ·æ–°é¡¹ç›®åˆ—è¡¨ï¼š                                          â”‚
â”‚     setProjects([...projects, project]);                   â”‚
â”‚  4. ï¼ˆå¯é€‰ï¼‰è·³è½¬åˆ°å·¥ä½œæµæ‰§è¡Œå™¨ï¼š                             â”‚
â”‚     navigate(`/workflows/${project.id}`);                  â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### æ¶‰åŠçš„æ–‡ä»¶å’ŒæœåŠ¡

| å±‚çº§ | ç»„ä»¶/æœåŠ¡ | æ–‡ä»¶è·¯å¾„ | å…³é”®ä»£ç è¡Œ |
|------|----------|---------|-----------|
| ç”¨æˆ·äº¤äº’å±‚ | Dashboard | `src/renderer/pages/dashboard/Dashboard.tsx` | 85-120 |
| IPC è°ƒç”¨å±‚ | electronAPI | `src/preload/index.ts` | 78 |
| IPC å¤„ç†å±‚ | ipcMain | `src/main/index.ts` | 321 |
| æœåŠ¡å±‚ | ProjectManager | `src/main/services/ProjectManager.ts` | 150-250 |
| æœåŠ¡å±‚ | TimeService | `src/main/services/TimeService.ts` | - |
| æœåŠ¡å±‚ | ConfigManager | `src/main/services/ConfigManager.ts` | - |
| æœåŠ¡å±‚ | Logger | `src/main/services/Logger.ts` | - |

---

### 2.2 æ‰“å¼€é¡¹ç›®æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ Dashboard é¡µé¢ç‚¹å‡»é¡¹ç›®å¡ç‰‡

#### ç®€åŒ–æ•°æ®æµ

```
ç”¨æˆ·ç‚¹å‡»é¡¹ç›®å¡ç‰‡
  â†“
handleOpenProject(projectId)
  â†“
åˆ¤æ–­é¡¹ç›®ç±»å‹ï¼ˆworkflowTypeï¼‰
  â”œâ”€ 'novel-to-video' â†’ navigate(`/workflows/${projectId}`)
  â””â”€ å…¶ä»– â†’ navigate(`/workflows/editor/${projectId}`)
  â†“
è·¯ç”±è·³è½¬åˆ° WorkflowExecutor æˆ– WorkflowEditor
  â†“
ç»„ä»¶ useEffect åŠ è½½é¡¹ç›®æ•°æ®ï¼š
  - window.electronAPI.loadProject(projectId)
  - IPC: 'project:load'
  - ProjectManager.loadProject(projectId)
  â†“
è¯»å–æ–‡ä»¶ï¼šWorkSpace/projects/{id}/project.json
  â†“
è¿”å› ProjectConfig
  â†“
æ¸²æŸ“é¡¹ç›®ç•Œé¢
```

---

## ä¸‰ã€A2 èµ„äº§ç®¡ç†æ•°æ®æµ

### 3.1 å¯¼å…¥èµ„äº§æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ Assets é¡µé¢ç‚¹å‡»"å¯¼å…¥èµ„äº§"æŒ‰é’®ï¼Œé€‰æ‹©æ–‡ä»¶

#### å®Œæ•´æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 1 å±‚ï¼šç”¨æˆ·äº¤äº’å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ç»„ä»¶ï¼šAssets.tsx (è¡Œ 120-150)                              â”‚
â”‚  1. ç”¨æˆ·ç‚¹å‡»"å¯¼å…¥èµ„äº§"æŒ‰é’®                                   â”‚
â”‚  2. è§¦å‘æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†                                       â”‚
â”‚     â†“                                                       â”‚
â”‚  handleImport()                                             â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 2 å±‚ï¼šIPC è°ƒç”¨å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 1ï¼šæ‰“å¼€æ–‡ä»¶é€‰æ‹©å¯¹è¯æ¡†                                  â”‚
â”‚  ```typescript                                              â”‚
â”‚  const result = await window.electronAPI.selectFiles({      â”‚
â”‚    filters: [                                               â”‚
â”‚      { name: 'Images', extensions: ['png', 'jpg', 'jpeg'] },â”‚
â”‚      { name: 'Videos', extensions: ['mp4', 'mov', 'avi'] }, â”‚
â”‚      { name: 'Audio', extensions: ['mp3', 'wav', 'aac'] },  â”‚
â”‚      { name: 'Text', extensions: ['txt', 'md'] }            â”‚
â”‚    ]                                                        â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚  â†’ IPC: 'dialog:selectFiles'                               â”‚
â”‚  â†’ è¿”å›ï¼š{ canceled: false, filePaths: ['C:/path/to/file.jpg'] }â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 2ï¼šå¯¼å…¥é€‰ä¸­çš„æ–‡ä»¶                                      â”‚
â”‚  ```typescript                                              â”‚
â”‚  const asset = await window.electronAPI.importAsset({       â”‚
â”‚    filePath: 'C:/path/to/old_photo.jpg',                   â”‚
â”‚    scope: 'global',  // æˆ– 'project'                       â”‚
â”‚    projectId: selectedProjectId,  // å¦‚æœscope='project'  â”‚
â”‚    category: undefined,  // è‡ªåŠ¨æ£€æµ‹                       â”‚
â”‚    tags: []                                                â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚  â†’ IPC: 'asset:import'                                     â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 3-4 å±‚ï¼šIPC é€šä¿¡å’Œå¤„ç† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  IPC å¤„ç†å™¨ (src/main/index.ts, è¡Œ 412)                    â”‚
â”‚  ```typescript                                              â”‚
â”‚  ipcMain.handle('asset:import',                             â”‚
â”‚    async (_, params: AssetImportParams) => {                â”‚
â”‚      return await assetManager.importAsset(params);         â”‚
â”‚    }                                                        â”‚
â”‚  );                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 5 å±‚ï¼šæœåŠ¡å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æœåŠ¡ï¼šAssetManager (src/main/services/AssetManager.ts)    â”‚
â”‚  æ–¹æ³•ï¼šimportAsset(params)                                  â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 1ï¼šæ–‡ä»¶ä¿¡æ¯æ£€æµ‹                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  const stats = await fs.stat(params.filePath);             â”‚
â”‚  const fileSize = stats.size;                              â”‚
â”‚  const fileName = path.basename(params.filePath);          â”‚
â”‚  const extension = path.extname(fileName).slice(1);        â”‚
â”‚  const mimeType = mime.lookup(params.filePath) || 'application/octet-stream';â”‚
â”‚  ```                                                        â”‚
â”‚  ç»“æœï¼š                                                      â”‚
â”‚  - fileName: 'old_photo.jpg'                               â”‚
â”‚  - extension: 'jpg'                                        â”‚
â”‚  - mimeType: 'image/jpeg'                                  â”‚
â”‚  - fileSize: 2048576 (2MB)                                 â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 2ï¼šç”Ÿæˆèµ„äº§ ID                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  const assetId = uuidv4();                                 â”‚
â”‚  // '660f7401-f39c-52e5-b827-557766551100'                â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 3ï¼šç¡®å®šç›®æ ‡è·¯å¾„                                        â”‚
â”‚  ```typescript                                              â”‚
â”‚  let targetPath;                                           â”‚
â”‚  if (params.scope === 'global') {                          â”‚
â”‚    targetPath = path.join(workspacePath, 'assets',        â”‚
â”‚                           'user_uploaded', fileName);       â”‚
â”‚    // E:\Projects\Matrix\WorkSpace\assets\user_uploaded\old_photo.jpgâ”‚
â”‚  } else {                                                  â”‚
â”‚    const dateFolder = new Date().toISOString().split('T')[0].replace(/-/g, '');â”‚
â”‚    targetPath = path.join(workspacePath, 'assets',        â”‚
â”‚                           'project_outputs', params.projectId,â”‚
â”‚                           dateFolder, fileName);            â”‚
â”‚    // E:\Projects\Matrix\WorkSpace\assets\project_outputs\proj-001\20251230\old_photo.jpgâ”‚
â”‚  }                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 4ï¼šå¤åˆ¶æ–‡ä»¶                                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  await fs.copyFile(params.filePath, targetPath);           â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 5ï¼šæ£€æµ‹åª’ä½“å±æ€§ï¼ˆå¦‚æœæ˜¯å›¾åƒï¼‰                          â”‚
â”‚  ```typescript                                              â”‚
â”‚  let width, height, aspectRatio;                           â”‚
â”‚  if (mimeType.startsWith('image/')) {                      â”‚
â”‚    const dimensions = await this.detectImageDimensions(    â”‚
â”‚      targetPath                                            â”‚
â”‚    );                                                      â”‚
â”‚    width = dimensions.width;   // 1920                    â”‚
â”‚    height = dimensions.height; // 1080                    â”‚
â”‚    aspectRatio = this.calculateAspectRatio(width, height); â”‚
â”‚    // '16:9'                                               â”‚
â”‚  }                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 6ï¼šåˆ›å»ºå…ƒæ•°æ®å¯¹è±¡                                      â”‚
â”‚  ```typescript                                              â”‚
â”‚  const currentTime = await this.timeService.getCurrentTime();â”‚
â”‚  const assetMetadata: AssetMetadata = {                    â”‚
â”‚    id: assetId,                                            â”‚
â”‚    name: fileName,                                         â”‚
â”‚    filePath: targetPath,                                   â”‚
â”‚    type: 'image',  // ä» mimeType æ¨æ–­                     â”‚
â”‚    category: params.category,                              â”‚
â”‚    scope: params.scope,  // 'global'                      â”‚
â”‚    createdAt: new Date(currentTime).toISOString(),        â”‚
â”‚    modifiedAt: new Date(currentTime).toISOString(),       â”‚
â”‚    importedAt: new Date(currentTime).toISOString(),       â”‚
â”‚    size: fileSize,                                         â”‚
â”‚    mimeType: mimeType,                                     â”‚
â”‚    extension: extension,                                   â”‚
â”‚    projectId: params.projectId,  // å¦‚æœ scope='project' â”‚
â”‚    isUserUploaded: params.scope === 'global',             â”‚
â”‚    tags: params.tags || [],                               â”‚
â”‚    status: 'none',                                         â”‚
â”‚    width: width,                                           â”‚
â”‚    height: height,                                         â”‚
â”‚    aspectRatio: aspectRatio,                               â”‚
â”‚    customFields: {}                                        â”‚
â”‚  };                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 6 å±‚ï¼šæ•°æ®æŒä¹…åŒ–å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 7ï¼šå†™å…¥ Sidecar å…ƒæ•°æ®æ–‡ä»¶                            â”‚
â”‚  ```typescript                                              â”‚
â”‚  const sidecarPath = `${targetPath}.json`;                 â”‚
â”‚  await fs.writeFile(                                        â”‚
â”‚    sidecarPath,                                            â”‚
â”‚    JSON.stringify(assetMetadata, null, 2),                 â”‚
â”‚    'utf-8'                                                 â”‚
â”‚  );                                                        â”‚
â”‚  ```                                                        â”‚
â”‚  æ–‡ä»¶ä½ç½®ï¼š                                                  â”‚
â”‚  E:\Projects\Matrix\WorkSpace\assets\user_uploaded\        â”‚
â”‚    old_photo.jpg.json                                      â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 8ï¼šæ›´æ–°èµ„äº§ç´¢å¼• (index.json)                          â”‚
â”‚  ```typescript                                              â”‚
â”‚  const index = await this.getIndex(params.projectId);      â”‚
â”‚  index.statistics.total += 1;                              â”‚
â”‚  index.statistics.byType[assetMetadata.type] =             â”‚
â”‚    (index.statistics.byType[assetMetadata.type] || 0) + 1; â”‚
â”‚  index.lastUpdated = new Date(currentTime).toISOString();  â”‚
â”‚  await this.saveIndex(index, params.projectId);            â”‚
â”‚  ```                                                        â”‚
â”‚  æ–‡ä»¶ä½ç½®ï¼š                                                  â”‚
â”‚  - å…¨å±€ç´¢å¼•ï¼šWorkSpace/assets/index.json                   â”‚
â”‚  - é¡¹ç›®ç´¢å¼•ï¼šWorkSpace/assets/project_outputs/{id}/index.jsonâ”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 9ï¼šè®°å½•æ—¥å¿—                                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  logger.info('èµ„äº§å¯¼å…¥æˆåŠŸ', {                              â”‚
â”‚    assetId,                                                â”‚
â”‚    fileName,                                               â”‚
â”‚    scope: params.scope,                                    â”‚
â”‚    size: fileSize                                          â”‚
â”‚  });                                                       â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç¬¬ 7 å±‚ï¼šäº‹ä»¶é€šçŸ¥å±‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  è§¦å‘æ–‡ä»¶ç›‘å¬äº‹ä»¶ï¼ˆchokidarï¼‰ï¼š                              â”‚
â”‚  ```typescript                                              â”‚
â”‚  BrowserWindow.getAllWindows()[0].webContents.send(         â”‚
â”‚    'asset:file-changed',                                   â”‚
â”‚    {                                                       â”‚
â”‚      eventType: 'add',                                     â”‚
â”‚      filePath: targetPath,                                 â”‚
â”‚      projectId: params.projectId                           â”‚
â”‚    }                                                       â”‚
â”‚  );                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ¸²æŸ“è¿›ç¨‹å¤„ç†ï¼ˆAssets.tsxï¼‰ï¼š                               â”‚
â”‚  1. åˆ·æ–°èµ„äº§åˆ—è¡¨ï¼š                                          â”‚
â”‚     setAssets([...assets, assetMetadata]);                 â”‚
â”‚  2. æ˜¾ç¤ºæˆåŠŸ Toastï¼š                                        â”‚
â”‚     showToast('success', 'èµ„äº§å¯¼å…¥æˆåŠŸï¼');                â”‚
â”‚  3. æ›´æ–°ç»Ÿè®¡ä¿¡æ¯                                            â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### 3.2 æ–‡ä»¶ç›‘å¬æœºåˆ¶

**æœåŠ¡**ï¼šAssetManager
**åº“**ï¼šchokidar

```
å¯åŠ¨ç›‘å¬ (AssetManager.startWatching)
  â†“
chokidar.watch(watchPath, options)
  â†“
ç›‘å¬äº‹ä»¶ç±»å‹ï¼š
  - 'add': æ–°æ–‡ä»¶æ·»åŠ 
  - 'change': æ–‡ä»¶ä¿®æ”¹
  - 'unlink': æ–‡ä»¶åˆ é™¤
  â†“
äº‹ä»¶å¤„ç†å™¨ï¼š
  - æ£€æŸ¥æ˜¯å¦ä¸ºèµ„äº§æ–‡ä»¶ï¼ˆé .jsonï¼‰
  - æ£€æŸ¥æ˜¯å¦åœ¨æ­£ç¡®çš„ä½œç”¨åŸŸè·¯å¾„
  - è§¦å‘ç´¢å¼•æ›´æ–°
  - é€šçŸ¥æ¸²æŸ“è¿›ç¨‹
  â†“
æ¸²æŸ“è¿›ç¨‹ç›‘å¬ (useEffect)ï¼š
  window.electronAPI.onAssetFileChanged((event) => {
    // åˆ·æ–°èµ„äº§åˆ—è¡¨
  });
```

---

## å››ã€A4 å·¥ä½œæµæ‰§è¡Œæ•°æ®æµ

### 4.1 æ‰§è¡Œå·¥ä½œæµæµç¨‹ï¼ˆå°è¯´è½¬è§†é¢‘ç¤ºä¾‹ï¼‰

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ WorkflowExecutor é¡µé¢ï¼Œé…ç½® Prompt å¹¶ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®

#### ç®€åŒ–æ•°æ®æµ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ç”¨æˆ·é…ç½®æ­¥éª¤ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  WorkflowExecutor.tsx (å½“å‰æ­¥éª¤ï¼šç« èŠ‚æ‹†åˆ†)                  â”‚
â”‚  1. ç”¨æˆ·ä¸Šä¼ å°è¯´æ–‡æœ¬æ–‡ä»¶                                     â”‚
â”‚  2. åœ¨å³ä¾§å±æ€§é¢æ¿é…ç½® Promptï¼š                              â”‚
â”‚     - åŸºç¡€Prompt: "å°†å°è¯´æ‹†åˆ†ä¸ºç‹¬ç«‹ç« èŠ‚..."                 â”‚
â”‚     - è‡ªå®šä¹‰å‚æ•°: { chapterLength: 3000 }                  â”‚
â”‚  3. é€‰æ‹©æ¨¡å‹ï¼š                                              â”‚
â”‚     - Provider: OpenAI                                     â”‚
â”‚     - Model: gpt-4-turbo                                   â”‚
â”‚  4. ç‚¹å‡»"ç”Ÿæˆ"æŒ‰é’®                                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ IPC è°ƒç”¨å’Œä»»åŠ¡åˆ›å»º â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  ChapterSplitPanel.tsx (è¡Œ 180)                             â”‚
â”‚  ```typescript                                              â”‚
â”‚  const executionId = await window.electronAPI.executeWorkflow({â”‚
â”‚    workflowId: currentWorkflowId,                           â”‚
â”‚    stepId: 'chapter-split',                                â”‚
â”‚    inputs: {                                               â”‚
â”‚      novelText: textContent,                               â”‚
â”‚      prompt: promptText,                                   â”‚
â”‚      model: selectedModel,                                 â”‚
â”‚      params: customParams                                  â”‚
â”‚    }                                                       â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚  â†’ IPC: 'workflow:execute'                                 â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ æœåŠ¡å±‚å¤„ç† â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  æœåŠ¡ï¼šTaskScheduler (src/main/services/TaskScheduler.ts)  â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 1ï¼šåˆ›å»ºä»»åŠ¡                                           â”‚
â”‚  ```typescript                                              â”‚
â”‚  const taskId = uuidv4();                                  â”‚
â”‚  const task = {                                            â”‚
â”‚    id: taskId,                                             â”‚
â”‚    type: 'workflow-step',                                  â”‚
â”‚    status: 'pending',                                      â”‚
â”‚    workflowId,                                             â”‚
â”‚    stepId: 'chapter-split',                                â”‚
â”‚    inputs,                                                 â”‚
â”‚    createdAt: currentTime                                  â”‚
â”‚  };                                                        â”‚
â”‚  this.taskQueue.push(task);                                â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 2ï¼šè°ƒç”¨ API Manager                                   â”‚
â”‚  ```typescript                                              â”‚
â”‚  const provider = await this.apiManager.getProvider(       â”‚
â”‚    'openai'                                                â”‚
â”‚  );                                                        â”‚
â”‚  const result = await this.apiManager.callAPI(             â”‚
â”‚    'openai',                                               â”‚
â”‚    {                                                       â”‚
â”‚      model: 'gpt-4-turbo',                                 â”‚
â”‚      prompt: promptText,                                   â”‚
â”‚      systemMessage: 'ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ç« èŠ‚æ‹†åˆ†åŠ©æ‰‹...',        â”‚
â”‚      input: novelText                                      â”‚
â”‚    }                                                       â”‚
â”‚  );                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 3ï¼šè§£æ AI å“åº”                                       â”‚
â”‚  ```typescript                                              â”‚
â”‚  const chapters = JSON.parse(result.output);               â”‚
â”‚  // [                                                      â”‚
â”‚  //   {                                                    â”‚
â”‚  //     chapterId: 'ch-001',                               â”‚
â”‚  //     chapterTitle: 'ç¬¬ä¸€ç« ï¼šåˆè¯†æ±Ÿæ¹–',                   â”‚
â”‚  //     chapterContent: '...'                              â”‚
â”‚  //   },                                                   â”‚
â”‚  //   ...                                                  â”‚
â”‚  // ]                                                      â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 4ï¼šä¿å­˜ç»“æœåˆ°èµ„äº§åº“                                    â”‚
â”‚  ```typescript                                              â”‚
â”‚  for (const chapter of chapters) {                         â”‚
â”‚    const assetId = await this.assetManager.createAsset({  â”‚
â”‚      name: `${chapter.chapterTitle}.txt`,                 â”‚
â”‚      type: 'text',                                         â”‚
â”‚      scope: 'project',                                     â”‚
â”‚      projectId,                                            â”‚
â”‚      category: 'chapter',                                  â”‚
â”‚      content: chapter.chapterContent,                      â”‚
â”‚      customFields: {                                       â”‚
â”‚        novelVideo: {                                       â”‚
â”‚          chapterId: chapter.chapterId,                     â”‚
â”‚          chapterTitle: chapter.chapterTitle,               â”‚
â”‚          chapterIndex: chapters.indexOf(chapter)           â”‚
â”‚        }                                                   â”‚
â”‚      }                                                     â”‚
â”‚    });                                                     â”‚
â”‚    outputAssetIds.push(assetId);                           â”‚
â”‚  }                                                         â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ­¥éª¤ 5ï¼šæ›´æ–°å·¥ä½œæµçŠ¶æ€                                      â”‚
â”‚  ```typescript                                              â”‚
â”‚  await this.workflowStateManager.updateStepStatus(         â”‚
â”‚    workflowId,                                             â”‚
â”‚    'chapter-split',                                        â”‚
â”‚    'completed',                                            â”‚
â”‚    {                                                       â”‚
â”‚      outputAssets: outputAssetIds,                         â”‚
â”‚      chapterCount: chapters.length                         â”‚
â”‚    }                                                       â”‚
â”‚  );                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ äº‹ä»¶é€šçŸ¥å’ŒUIæ›´æ–° â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                                             â”‚
â”‚  è¿›åº¦é€šçŸ¥ï¼ˆå®æ—¶ï¼‰ï¼š                                          â”‚
â”‚  ```typescript                                              â”‚
â”‚  BrowserWindow.webContents.send('event:workflow:progress', {â”‚
â”‚    workflowId,                                             â”‚
â”‚    stepId: 'chapter-split',                                â”‚
â”‚    progress: 50,  // 0-100                                â”‚
â”‚    message: 'æ­£åœ¨æ‹†åˆ†ç« èŠ‚...'                               â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  å®Œæˆé€šçŸ¥ï¼š                                                  â”‚
â”‚  ```typescript                                              â”‚
â”‚  BrowserWindow.webContents.send('event:workflow:completed',{â”‚
â”‚    workflowId,                                             â”‚
â”‚    stepId: 'chapter-split',                                â”‚
â”‚    result: {                                               â”‚
â”‚      chapterCount: chapters.length,                        â”‚
â”‚      outputAssets: outputAssetIds                          â”‚
â”‚    }                                                       â”‚
â”‚  });                                                        â”‚
â”‚  ```                                                        â”‚
â”‚                                                             â”‚
â”‚  æ¸²æŸ“è¿›ç¨‹å¤„ç†ï¼ˆWorkflowExecutor.tsxï¼‰ï¼š                     â”‚
â”‚  1. æ›´æ–°æ­¥éª¤çŠ¶æ€ï¼š                                          â”‚
â”‚     setStepStatus('chapter-split', 'completed');           â”‚
â”‚  2. æ˜¾ç¤ºæˆåŠŸé€šçŸ¥ï¼š                                          â”‚
â”‚     showToast('success', `æˆåŠŸæ‹†åˆ† ${result.chapterCount} ä¸ªç« èŠ‚ï¼`);â”‚
â”‚  3. åˆ·æ–°é¡¹ç›®èµ„æºæ ‘ï¼š                                        â”‚
â”‚     loadProjectAssets(projectId);                          â”‚
â”‚  4. è‡ªåŠ¨è¿›å…¥ä¸‹ä¸€æ­¥ï¼ˆå¯é€‰ï¼‰ï¼š                                 â”‚
â”‚     setCurrentStep(currentStep + 1);                       â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## äº”ã€A3 æ’ä»¶ç®¡ç†æ•°æ®æµ

### 5.1 å®‰è£…æ’ä»¶æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ Plugins é¡µé¢ç‚¹å‡»"ä» ZIP å®‰è£…"

#### ç®€åŒ–æ•°æ®æµ

```
ç”¨æˆ·é€‰æ‹© ZIP æ–‡ä»¶
  â†“
window.electronAPI.installPluginFromZip(zipPath, 'official')
  â†“
IPC: 'plugin:installFromZip'
  â†“
PluginManager.installPluginFromZip(zipPath, type)
  â†“
æ­¥éª¤ 1ï¼šå®‰å…¨æ£€æŸ¥
  - æ£€æŸ¥æ–‡ä»¶å¤§å°ï¼ˆ< 100MBï¼‰
  - æ£€æŸ¥ ZIP ç‚¸å¼¹ï¼ˆè§£å‹åå¤§å° < 500MBï¼‰
  - æ£€æŸ¥è·¯å¾„éå†æ”»å‡»ï¼ˆ../ ç­‰ï¼‰
  â†“
æ­¥éª¤ 2ï¼šè§£å‹åˆ°ä¸´æ—¶ç›®å½•
  - adm-zip.extractAllTo(tempDir)
  â†“
æ­¥éª¤ 3ï¼šéªŒè¯ manifest.json
  - è¯»å– manifest.json
  - éªŒè¯å¿…éœ€å­—æ®µï¼ˆid, name, version, mainï¼‰
  - éªŒè¯ç‰ˆæœ¬æ ¼å¼ï¼ˆsemverï¼‰
  - éªŒè¯ ID æ ¼å¼ï¼ˆkebab-caseï¼‰
  â†“
æ­¥éª¤ 4ï¼šç§»åŠ¨åˆ°æ’ä»¶ç›®å½•
  - ç›®æ ‡è·¯å¾„ï¼šplugins/{type}/{pluginId}/
  - å¤åˆ¶æ‰€æœ‰æ–‡ä»¶
  - åˆ é™¤ä¸´æ—¶ç›®å½•
  â†“
æ­¥éª¤ 5ï¼šåŠ è½½æ’ä»¶
  - è¯»å– main å­—æ®µæŒ‡å‘çš„å…¥å£æ–‡ä»¶
  - ä½¿ç”¨ eval('require')(pluginPath)
  - éªŒè¯æ’ä»¶å¯¼å‡ºæ¥å£
  â†“
æ­¥éª¤ 6ï¼šæ›´æ–°é…ç½®
  - æ·»åŠ åˆ° ConfigManager çš„æ’ä»¶åˆ—è¡¨
  - ä¿å­˜é…ç½®æ–‡ä»¶
  â†“
è¿”å› PluginInfo å¯¹è±¡
  â†“
æ¸²æŸ“è¿›ç¨‹ï¼šåˆ·æ–°æ’ä»¶åˆ—è¡¨
```

---

## å…­ã€å¿«æ·æ–¹å¼ç®¡ç†æ•°æ®æµ

### 6.1 æ·»åŠ å¿«æ·æ–¹å¼æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨é¡¹ç›®å¡ç‰‡ä¸Šç‚¹å‡»"å¿«æ·æ–¹å¼"å›¾æ ‡ï¼ˆPin å›¾æ ‡ï¼‰

```
Dashboard.tsx: handleAddShortcut(project)
  â†“
window.electronAPI.addShortcut({
  type: 'project',
  targetId: project.id,
  name: project.name,
  icon: 'projects_icon.ico'
})
  â†“
IPC: 'shortcut:add'
  â†“
ShortcutManager.addShortcut(item)
  â†“
æ­¥éª¤ 1ï¼šç”Ÿæˆå¿«æ·æ–¹å¼ ID
  - id = uuidv4()
  â†“
æ­¥éª¤ 2ï¼šè·å–å½“å‰æ—¶é—´
  - createdAt = timeService.getCurrentTime()
  â†“
æ­¥éª¤ 3ï¼šç¡®å®šæ’åºé¡ºåº
  - order = currentShortcuts.length + 1
  â†“
æ­¥éª¤ 4ï¼šåˆ›å»ºå¿«æ·æ–¹å¼å¯¹è±¡
  - shortcutItem = { id, type, targetId, name, icon, order, createdAt }
  â†“
æ­¥éª¤ 5ï¼šæ›´æ–°é…ç½®
  - config.shortcuts.push(shortcutItem)
  - configManager.save(config)
  â†“
å†™å…¥é…ç½®æ–‡ä»¶ï¼šconfig/settings.json
  â†“
è¿”å› shortcutItem
  â†“
æ¸²æŸ“è¿›ç¨‹ï¼šè°ƒç”¨ refreshGlobalNav()
  â†“
GlobalNav é‡æ–°åŠ è½½å¿«æ·æ–¹å¼åˆ—è¡¨
```

---

## ä¸ƒã€é…ç½®ç®¡ç†æ•°æ®æµ

### 7.1 ä¿å­˜è®¾ç½®æµç¨‹

**ç”¨æˆ·æ“ä½œ**ï¼šåœ¨ Settings é¡µé¢ä¿®æ”¹é…ç½®å¹¶ç‚¹å‡»"ä¿å­˜"

```
Settings.tsx: handleSave()
  â†“
window.electronAPI.saveSettings(config)
  â†“
IPC: 'settings:save'
  â†“
ConfigManager.save(config)
  â†“
æ­¥éª¤ 1ï¼šéªŒè¯é…ç½®ç»“æ„
  - æ£€æŸ¥å¿…éœ€å­—æ®µ
  - éªŒè¯è·¯å¾„æœ‰æ•ˆæ€§
  â†“
æ­¥éª¤ 2ï¼šåŠ å¯†æ•æ„Ÿä¿¡æ¯
  - åŠ å¯† API å¯†é’¥ï¼ˆAPIKeyEncryption.encryptï¼‰
  - ä½¿ç”¨ AES-256-GCM
  - å¯†é’¥åŸºäº machineId
  â†“
æ­¥éª¤ 3ï¼šå†™å…¥é…ç½®æ–‡ä»¶
  - è·¯å¾„ï¼šconfig/settings.json
  - æ ¼å¼ï¼šJSONï¼ˆç¾åŒ–è¾“å‡ºï¼‰
  â†“
æ­¥éª¤ 4ï¼šè§¦å‘é…ç½®å˜æ›´äº‹ä»¶
  - ConfigManager.emit('config-changed', config)
  â†“
ç›‘å¬å™¨å“åº”ï¼š
  - AssetManager: é‡æ–°åŠ è½½å·¥ä½œåŒºè·¯å¾„
  - PluginManager: é‡æ–°åŠ è½½æ’ä»¶é…ç½®
  - APIManager: é‡æ–°åŠ è½½ Provider é…ç½®
  â†“
è¿”å› { success: true }
  â†“
æ¸²æŸ“è¿›ç¨‹ï¼šæ˜¾ç¤ºæˆåŠŸ Toast
```

---

## å…«ã€æ•°æ®æ–‡ä»¶ç»“æ„æ€»ç»“

### 8.1 æ–‡ä»¶ç³»ç»Ÿå¸ƒå±€

```
WorkSpace/
â”œâ”€â”€ assets/
â”‚   â”œâ”€â”€ user_uploaded/                    # ç”¨æˆ·ä¸Šä¼ çš„å…¨å±€èµ„äº§
â”‚   â”‚   â”œâ”€â”€ old_photo.jpg
â”‚   â”‚   â”œâ”€â”€ old_photo.jpg.json            # Sidecar å…ƒæ•°æ®
â”‚   â”‚   â””â”€â”€ ...
â”‚   â”œâ”€â”€ project_outputs/                  # é¡¹ç›®ç”Ÿæˆçš„èµ„äº§
â”‚   â”‚   â””â”€â”€ {projectId}/
â”‚   â”‚       â”œâ”€â”€ 20251230/                 # æŒ‰æ—¥æœŸæ–‡ä»¶å¤¹åˆ†éš”
â”‚   â”‚       â”‚   â”œâ”€â”€ scene_proj-001-scene-001.png
â”‚   â”‚       â”‚   â”œâ”€â”€ scene_proj-001-scene-001.png.json
â”‚   â”‚       â”‚   â””â”€â”€ ...
â”‚   â”‚       â””â”€â”€ index.json                # é¡¹ç›®èµ„äº§ç´¢å¼•
â”‚   â””â”€â”€ index.json                        # å…¨å±€èµ„äº§ç´¢å¼•
â”œâ”€â”€ projects/
â”‚   â””â”€â”€ {projectId}/
â”‚       â”œâ”€â”€ project.json                  # é¡¹ç›®é…ç½®
â”‚       â”œâ”€â”€ workflow.json                 # å·¥ä½œæµå®šä¹‰ï¼ˆå¦‚æœæœ‰ï¼‰
â”‚       â””â”€â”€ ...
â””â”€â”€ config/
    â””â”€â”€ settings.json                     # åº”ç”¨é…ç½®ï¼ˆåŠ å¯†å­˜å‚¨ï¼‰
```

### 8.2 å…³é”®æ•°æ®æ–‡ä»¶æ ¼å¼

#### project.jsonï¼ˆé¡¹ç›®é…ç½®ï¼‰

```json
{
  "id": "550e8400-e29b-41d4-a716-446655440000",
  "name": "æˆ‘çš„å°è¯´è½¬è§†é¢‘é¡¹ç›®",
  "path": "E:\\Projects\\Matrix\\WorkSpace\\projects\\550e8400-...",
  "createdAt": "2025-12-30T10:30:00.000Z",
  "updatedAt": "2025-12-30T10:30:00.000Z",
  "settings": {
    "defaultWorkflow": "novel-to-video",
    "outputFormat": "mp4",
    "quality": "high"
  },
  "workflows": [],
  "assets": [],
  "workflowType": "novel-to-video",
  "pluginId": "novel-to-video",
  "currentWorkflowInstanceId": "novel-to-video-1735567890123-abc",
  "status": "in-progress",
  "inputAssets": ["660f7401-f39c-52e5-b827-557766551100"],
  "outputAssets": ["770g8502-g40d-63f6-c938-668877662211"],
  "immutable": false
}
```

#### asset.jsonï¼ˆSidecar å…ƒæ•°æ®ï¼‰

```json
{
  "id": "660f7401-f39c-52e5-b827-557766551100",
  "name": "old_photo.jpg",
  "filePath": "E:\\Projects\\Matrix\\WorkSpace\\assets\\user_uploaded\\old_photo.jpg",
  "type": "image",
  "scope": "global",
  "createdAt": "2025-12-30T10:35:00.000Z",
  "modifiedAt": "2025-12-30T10:35:00.000Z",
  "importedAt": "2025-12-30T10:35:00.000Z",
  "size": 2048576,
  "mimeType": "image/jpeg",
  "extension": "jpg",
  "isUserUploaded": true,
  "tags": ["è€ç…§ç‰‡", "å®¶åº­"],
  "status": "none",
  "width": 1920,
  "height": 1080,
  "aspectRatio": "16:9",
  "customFields": {}
}
```

#### index.jsonï¼ˆèµ„äº§ç´¢å¼•ï¼‰

```json
{
  "version": "1.0",
  "lastUpdated": "2025-12-30T10:35:00.000Z",
  "statistics": {
    "total": 15,
    "byType": {
      "image": 10,
      "video": 3,
      "audio": 2,
      "text": 0,
      "other": 0
    },
    "byCategory": {
      "scene": 5,
      "character": 3,
      "storyboard": 2
    }
  },
  "categories": [
    {
      "id": "scene",
      "name": "åœºæ™¯",
      "count": 5,
      "icon": "ğŸ–¼ï¸"
    }
  ]
}
```

---

## ä¹ã€æ€»ç»“

### 9.1 æ•°æ®æµç‰¹ç‚¹

1. **æ¸…æ™°çš„åˆ†å±‚æ¶æ„**ï¼šç”¨æˆ·äº¤äº’ â†’ IPC è°ƒç”¨ â†’ æœåŠ¡å¤„ç† â†’ æ•°æ®æŒä¹…åŒ– â†’ äº‹ä»¶é€šçŸ¥
2. **æ—¶é—´åˆè§„æ€§**ï¼šæ‰€æœ‰æ—¶é—´æˆ³é€šè¿‡ TimeService éªŒè¯ï¼Œé˜²æ­¢æ—¶é—´å¼‚å¸¸
3. **å®Œå–„çš„æ—¥å¿—è®°å½•**ï¼šæ¯ä¸ªå…³é”®æ“ä½œéƒ½è®°å½•æ—¥å¿—ï¼Œä¾¿äºè¿½è¸ªå’Œè°ƒè¯•
4. **åŒå‘äº‹ä»¶é€šçŸ¥**ï¼šä¸»è¿›ç¨‹å¯ä¸»åŠ¨æ¨é€äº‹ä»¶åˆ°æ¸²æŸ“è¿›ç¨‹ï¼Œå®ç°å®æ—¶æ›´æ–°
5. **ç´¢å¼•ç³»ç»Ÿ**ï¼šèµ„äº§ä½¿ç”¨ JSON ç´¢å¼•ï¼Œæ”¯æŒå¿«é€ŸæŸ¥è¯¢å’Œç»Ÿè®¡
6. **Sidecar å…ƒæ•°æ®**ï¼šå…ƒæ•°æ®ç‹¬ç«‹å­˜å‚¨ï¼Œæ–¹ä¾¿å¤‡ä»½å’Œè¿ç§»

### 9.2 æ•°æ®æµä¼˜åŠ¿

1. **ç±»å‹å®‰å…¨**ï¼šæ‰€æœ‰ IPC é€šé“éƒ½æœ‰ TypeScript ç±»å‹å®šä¹‰
2. **é”™è¯¯å¤„ç†**ï¼šç»Ÿä¸€çš„é”™è¯¯å¤„ç†æœºåˆ¶ï¼Œç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
3. **äº‹ä»¶é©±åŠ¨**ï¼šæ–‡ä»¶ç›‘å¬ã€é…ç½®å˜æ›´ç­‰ä½¿ç”¨äº‹ä»¶é©±åŠ¨æ¶æ„
4. **å¯è¿½æº¯æ€§**ï¼šå®Œæ•´çš„æ—¥å¿—è®°å½•ï¼Œæ”¯æŒå®¡è®¡å’Œé—®é¢˜å®šä½
5. **æ‰©å±•æ€§**ï¼šæ’ä»¶å¯ä»¥æ³¨å†Œè‡ªå®šä¹‰ Schemaï¼Œæ‰©å±•æ•°æ®æ¨¡å‹

### 9.3 æ½œåœ¨ä¼˜åŒ–ç‚¹

1. **æ•°æ®ç¼“å­˜**ï¼šéƒ¨åˆ†é¢‘ç¹æŸ¥è¯¢çš„æ•°æ®å¯ä»¥å¢åŠ ç¼“å­˜å±‚
2. **æ‰¹é‡æ“ä½œ**ï¼šèµ„äº§å¯¼å…¥æ”¯æŒæ‰¹é‡æ“ä½œï¼Œå‡å°‘ IPC è°ƒç”¨æ¬¡æ•°
3. **å¢é‡æ›´æ–°**ï¼šç´¢å¼•æ›´æ–°å¯ä»¥æ”¹ä¸ºå¢é‡æ›´æ–°ï¼Œæå‡æ€§èƒ½
4. **äº‹åŠ¡æœºåˆ¶**ï¼šå…³é”®æ“ä½œï¼ˆå¦‚é¡¹ç›®åˆ›å»ºï¼‰å¯ä»¥å¢åŠ äº‹åŠ¡å›æ»šæœºåˆ¶

---

**æ–‡æ¡£ç»“æŸ**
