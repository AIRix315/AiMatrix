# Electron å¼€å‘ç¯å¢ƒé—®é¢˜åˆ†ææŠ¥å‘Š

## æ‰§è¡Œæ—¶é—´
**åˆ†ææ—¶é—´**: 2025-12-24T09:52:00+08:00  
**åˆ†æäººå‘˜**: AI Assistant  
**é¡¹ç›®ç‰ˆæœ¬**: v0.0.1

---

## ğŸ“Š ç¯å¢ƒçŠ¶æ€æ€»è§ˆ

### âœ… æ­£å¸¸çŠ¶æ€
1. **Electron å®‰è£…å®Œæ•´æ€§**: âœ… ç¡®è®¤
   - `node_modules/electron` ç›®å½•å­˜åœ¨ä¸”å®Œæ•´
   - åŒ…å«æ‰€æœ‰å¿…éœ€çš„äºŒè¿›åˆ¶æ–‡ä»¶ (electron.exe, chrome_100_percent.pak, ffmpeg.dll ç­‰)
   - ç‰ˆæœ¬: 39.2.7 (æœ€æ–°ç¨³å®šç‰ˆ)
   - å®‰è£…æ—¶é—´: 2025-12-24 08:33:23 (ä»Šå¤©)

2. **é¡¹ç›®ç»“æ„å®Œæ•´æ€§**: âœ… ç¡®è®¤
   - æ‰€æœ‰å¿…éœ€çš„é…ç½®æ–‡ä»¶å­˜åœ¨
   - æºä»£ç ç»“æ„ç¬¦åˆ Electron æœ€ä½³å®è·µ
   - Webpack é…ç½®æ­£ç¡®åˆ†ç¦»ä¸»è¿›ç¨‹ã€æ¸²æŸ“è¿›ç¨‹å’Œé¢„åŠ è½½è„šæœ¬

3. **ä»£ç è´¨é‡**: âœ… è‰¯å¥½
   - TypeScript é…ç½®æ­£ç¡®
   - IPC é€šä¿¡æ¶æ„å®Œæ•´
   - é¢„åŠ è½½è„šæœ¬å®‰å…¨é…ç½®æ­£ç¡® (contextIsolation: true, nodeIntegration: false)

---

## âš ï¸ æ½œåœ¨é—®é¢˜åˆ†æ

### 1. é…ç½®æ–‡ä»¶è¯„ä¼°

#### âœ… æ­£ç¡®é…ç½®
- **Webpack ä¸»è¿›ç¨‹é…ç½®** (`config/webpack.main.config.js`)
  - target: 'electron-main' âœ…
  - externals é…ç½®æ­£ç¡® âœ…
  - Node.js å†…ç½®æ¨¡å—å¤–éƒ¨åŒ– âœ…

- **Webpack æ¸²æŸ“è¿›ç¨‹é…ç½®** (`config/webpack.renderer.config.js`)
  - target: 'electron-renderer' âœ…
  - ç«¯å£é…ç½®æ­£ç¡® (3001) âœ…
  - HTML æ¨¡æ¿é…ç½®æ­£ç¡® âœ…

- **Webpack é¢„åŠ è½½é…ç½®** (`config/webpack.preload.config.js`)
  - target: 'electron-preload' âœ…
  - externals é…ç½®æ­£ç¡® âœ…

- **çª—å£ç®¡ç†** (`src/main/window.ts`)
  - å®‰å…¨é…ç½®æ­£ç¡® (contextIsolation: true, nodeIntegration: false) âœ…
  - é¢„åŠ è½½è„šæœ¬è·¯å¾„æ­£ç¡® âœ…
  - å¼€å‘/ç”Ÿäº§ç¯å¢ƒ URL é…ç½®æ­£ç¡® âœ…

#### âš ï¸ éœ€è¦éªŒè¯çš„é…ç½®
- **electron-builder é…ç½®** (`config/electron-builder.json` vs `package.json`)
  - å­˜åœ¨ä¸¤å¥—é…ç½®ï¼Œå¯èƒ½å†²çª
  - `package.json` ä¸­çš„ files é…ç½®å·²ä¿®å¤ (ç§»é™¤äº† "node_modules/**/*")
  - å»ºè®®ç»Ÿä¸€ä½¿ç”¨ä¸€å¥—é…ç½®

### 2. ä¾èµ–ç‰ˆæœ¬å…¼å®¹æ€§

#### å½“å‰ç‰ˆæœ¬ä¿¡æ¯
- **Node.js**: éœ€è¦éªŒè¯ (å»ºè®® 18.0+)
- **npm**: éœ€è¦éªŒè¯ (å»ºè®® 9.0+)
- **Electron**: 39.2.7 âœ… (æœ€æ–°ç¨³å®šç‰ˆ)
- **TypeScript**: 5.0.0 âœ…
- **React**: 18.0.0 âœ…
- **Webpack**: 5.0.0 âœ…

#### å…¼å®¹æ€§çŸ©é˜µ
| ç»„ä»¶ | å½“å‰ç‰ˆæœ¬ | æ¨èç‰ˆæœ¬ | çŠ¶æ€ |
|------|----------|----------|------|
| Node.js | ? | 18.0+ | â“ éœ€éªŒè¯ |
| npm | ? | 9.0+ | â“ éœ€éªŒè¯ |
| Electron | 39.2.7 | 39.2.7 | âœ… å…¼å®¹ |
| TypeScript | 5.0.0 | 5.0+ | âœ… å…¼å®¹ |
| React | 18.0.0 | 18.0+ | âœ… å…¼å®¹ |

---

## ğŸ” æ ¹æœ¬åŸå› åˆ†æ

### å†å²é—®é¢˜å›é¡¾
æ ¹æ® `logs/development/development-progress.md` è®°å½•ï¼š

1. **å·²è§£å†³çš„é—®é¢˜** âœ…
   - ç«¯å£å†²çª (3000 â†’ 3001)
   - Electron é…ç½®è¿‡æ—¶ (enableRemoteModule ç§»é™¤)
   - ä¾èµ–ç¼ºå¤± (react-router-dom, style-loader, css-loader)
   - ç»„ä»¶æ–‡ä»¶ç¼ºå¤± (å·²åˆ›å»º)

2. **æ‰“åŒ…é—®é¢˜** âœ…
   - Electron è¢«é”™è¯¯æ‰“åŒ…è¿›åº”ç”¨ (å·²ä¿®å¤ files é…ç½®)
   - Webpack externals é…ç½®æ­£ç¡®

### å½“å‰å¯èƒ½çš„é—®é¢˜æº

#### 1. ç¯å¢ƒå˜é‡å’Œé…ç½®ä¸ä¸€è‡´
- **å¯èƒ½ç—‡çŠ¶**: å¼€å‘ç¯å¢ƒå¯åŠ¨å¤±è´¥
- **æ£€æŸ¥ç‚¹**: 
  - `NODE_ENV` è®¾ç½®
  - `ELECTRON_IS_DEV` ç¯å¢ƒå˜é‡
  - è·¯å¾„è§£æé…ç½®

#### 2. æ„å»ºç¼“å­˜é—®é¢˜
- **å¯èƒ½ç—‡çŠ¶**: ç¼–è¯‘é”™è¯¯æˆ–è¿è¡Œæ—¶é”™è¯¯
- **è§£å†³æ–¹æ¡ˆ**: æ¸…ç†æ„å»ºç¼“å­˜

#### 3. å¹¶å‘è¿›ç¨‹å†²çª
- **å¯èƒ½ç—‡çŠ¶**: ç«¯å£å ç”¨æˆ–è¿›ç¨‹é”å®š
- **æ£€æŸ¥ç‚¹**: 
  - Webpack Dev Server ç«¯å£ (3001)
  - Electron è¿›ç¨‹ç®¡ç†
  - concurrently é…ç½®

---

## ğŸ“‹ é—®é¢˜è¯Šæ–­æ£€æŸ¥æ¸…å•

### ğŸ”§ ç«‹å³æ£€æŸ¥é¡¹ç›®
1. **éªŒè¯ Node.js å’Œ npm ç‰ˆæœ¬**
   ```bash
   node -v  # åº”è¯¥ >= 18.0.0
   npm -v   # åº”è¯¥ >= 9.0.0
   ```

2. **æ¸…ç†æ„å»ºç¼“å­˜**
   ```bash
   npm run clean
   rimraf build dist
   npm cache clean --force
   ```

3. **éªŒè¯ Electron å®‰è£…**
   ```bash
   npx electron -v
   ```

4. **æµ‹è¯•åŸºæœ¬æ„å»º**
   ```bash
   npm run build:main
   npm run build:preload
   npm run build:renderer
   ```

### ğŸ§ª æ·±åº¦è¯Šæ–­é¡¹ç›®
1. **æ£€æŸ¥ç½‘ç»œå’Œä»£ç†è®¾ç½®**
   - npm é…ç½®çš„é•œåƒæº
   - ä»£ç†è®¾ç½®
   - é˜²ç«å¢™è§„åˆ™

2. **éªŒè¯æ–‡ä»¶æƒé™**
   - node_modules ç›®å½•æƒé™
   - æ„å»ºè¾“å‡ºç›®å½•æƒé™

3. **æ£€æŸ¥ç³»ç»Ÿèµ„æº**
   - ç£ç›˜ç©ºé—´
   - å†…å­˜ä½¿ç”¨
   - å¹¶å‘è¿›ç¨‹é™åˆ¶

---

## ğŸ› ï¸ æ¨èè§£å†³æ–¹æ¡ˆ

### æ–¹æ¡ˆä¸€ï¼šæ ‡å‡†ç¯å¢ƒé‡ç½® (æ¨è)
```bash
# 1. æ¸…ç†ç¯å¢ƒ
npm run clean
rimraf node_modules
npm cache clean --force

# 2. é‡æ–°å®‰è£…
npm install

# 3. éªŒè¯å®‰è£…
npx electron -v
npm run build
```

### æ–¹æ¡ˆäºŒï¼šç½‘ç»œé—®é¢˜ä¿®å¤
```bash
# è®¾ç½®å›½å†…é•œåƒ
npm config set electron_mirror https://npmmirror.com/mirrors/electron/
npm config set electron_custom_dir "{{ version }}"

# é‡æ–°å®‰è£… Electron
npm install electron@39.2.7
```

### æ–¹æ¡ˆä¸‰ï¼šé…ç½®ç»Ÿä¸€åŒ–
- ç»Ÿä¸€ electron-builder é…ç½®åˆ°å•ä¸€æ–‡ä»¶
- éªŒè¯ Webpack é…ç½®çš„ä¸€è‡´æ€§
- ç¡®è®¤ç¯å¢ƒå˜é‡è®¾ç½®

---

## ğŸ“š æœ¬åœ°æ–‡æ¡£æŸ¥è¯¢æœºåˆ¶å»ºè®®

### 1. åˆ›å»ºæœ¬åœ°çŸ¥è¯†åº“
```markdown
docs/electron-troubleshooting/
â”œâ”€â”€ installation-issues.md
â”œâ”€â”€ configuration-problems.md
â”œâ”€â”€ build-errors.md
â”œâ”€â”€ runtime-errors.md
â””â”€â”€ best-practices.md
```

### 2. å¿«é€Ÿè¯Šæ–­è„šæœ¬
åˆ›å»º `scripts/diagnose.js`ï¼š
- æ£€æŸ¥ Node.js ç‰ˆæœ¬
- éªŒè¯ Electron å®‰è£…
- æ£€æŸ¥ç«¯å£å ç”¨
- éªŒè¯é…ç½®æ–‡ä»¶

### 3. é”™è¯¯æ—¥å¿—åˆ†æ
åˆ›å»º `scripts/analyze-logs.js`ï¼š
- è§£ææ„å»ºé”™è¯¯
- è¯†åˆ«å¸¸è§é—®é¢˜æ¨¡å¼
- æä¾›ä¿®å¤å»ºè®®

---

## ğŸ¯ ä¸‹ä¸€æ­¥è¡ŒåŠ¨è®¡åˆ’

### ç«‹å³æ‰§è¡Œ (ä»Šå¤©)
1. éªŒè¯ Node.js å’Œ npm ç‰ˆæœ¬å…¼å®¹æ€§
2. ç»Ÿä¸€ electron-builder é…ç½®
3. æ¸…ç†å¹¶é‡æ–°æ„å»ºé¡¹ç›®

### çŸ­æœŸè®¡åˆ’ (æœ¬å‘¨)
1. åˆ›å»ºæœ¬åœ° Electron æ–‡æ¡£æŸ¥è¯¢æœºåˆ¶
2. å»ºç«‹è‡ªåŠ¨åŒ–è¯Šæ–­è„šæœ¬
3. å®Œå–„é”™è¯¯å¤„ç†å’Œæ—¥å¿—è®°å½•

### é•¿æœŸé¢„é˜² (æŒç»­)
1. å»ºç«‹ CI/CD ç¯å¢ƒæ£€æŸ¥
2. å®šæœŸæ›´æ–°ä¾èµ–ç‰ˆæœ¬
3. ç»´æŠ¤æ•…éšœæ’é™¤çŸ¥è¯†åº“

---

## ğŸ“ æ”¯æŒèµ„æº

### å®˜æ–¹æ–‡æ¡£
- [Electron å®˜æ–¹æ–‡æ¡£](https://www.electronjs.org/docs)
- [Electron Builder é…ç½®](https://www.electron.build/configuration)
- [Webpack é…ç½®æŒ‡å—](https://webpack.js.org/configuration/)

### ç¤¾åŒºèµ„æº
- [Electron GitHub Issues](https://github.com/electron/electron/issues)
- [Stack Overflow Electron æ ‡ç­¾](https://stackoverflow.com/questions/tagged/electron)

### MCP æœåŠ¡
- Context7 Electron æ–‡æ¡£æŸ¥è¯¢
- æ—¶é—´æœåŠ¡ MCP (ç¡®ä¿æ—¶é—´åˆè§„)

---

## ğŸ“ˆ æˆåŠŸæŒ‡æ ‡

### ç¯å¢ƒå¥åº·æŒ‡æ ‡
- âœ… `npm run dev` æˆåŠŸå¯åŠ¨
- âœ… æ‰€æœ‰æ„å»ºæ­¥éª¤æ— é”™è¯¯
- âœ… åº”ç”¨çª—å£æ­£å¸¸æ˜¾ç¤º
- âœ… IPC é€šä¿¡æ­£å¸¸å·¥ä½œ
- âœ… æ‰“åŒ…æµç¨‹æ— é”™è¯¯

### å¼€å‘æ•ˆç‡æŒ‡æ ‡
- ğŸ“Š å†·å¯åŠ¨æ—¶é—´ < 10ç§’
- ğŸ“Š çƒ­é‡è½½å“åº”æ—¶é—´ < 2ç§’
- ğŸ“Š æ„å»ºæ—¶é—´ < 30ç§’
- ğŸ“Š æ‰“åŒ…æ—¶é—´ < 5åˆ†é’Ÿ

---

**æŠ¥å‘Šç”Ÿæˆæ—¶é—´**: 2025-12-24T09:52:00+08:00  
**ä¸‹æ¬¡è¯„ä¼°æ—¶é—´**: 2025-12-24T18:00:00+08:00  
**è´Ÿè´£äºº**: å¼€å‘å›¢é˜Ÿ