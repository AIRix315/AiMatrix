<!-- matrix-studio-electron/src/renderer/views/editor.html -->
<div class="editor-container">
    <!-- Left Sidebar -->
    <aside class="sidebar-panel" id="sidebarLeft" style="width: 240px;">
        <div class="panel-header">项目资源 (Project Local)</div>
        <div class="panel-content">
            <div style="color:#00E676; margin-bottom:8px; cursor:pointer">📂 剧本文件</div>
            <div style="padding-left:15px; margin-bottom:10px; color:#ccc;">📄 剧本_V1.txt</div>
            <div style="color:#2196F3; margin-bottom:8px; cursor:pointer">📂 场景库</div>
            <div style="padding-left:15px; margin-bottom:4px; color:#888;">▼ Scene 01</div>
            <div style="padding-left:30px; margin-bottom:4px;">• 概念图_A</div>
            <div style="color:#FF9800; margin-bottom:8px; cursor:pointer">📂 音频库</div>
        </div>
    </aside>
    <div class="resizer" id="resizerLeft"></div>

    <!-- MAIN CONTENT -->
    <main class="main-content">
        <div class="nav-container">
            <div class="nav-row-main">
                <div class="layout-btn-group">
                    <button class="layout-btn" id="btnToggleLeft">
                        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM8 20H4V4h4v16zm12 0h-10V4h10v16z"/></svg>
                    </button>
                </div>
                <div class="nav-tabs" id="step-tabs">
                    <div class="step-tab" data-step="1"><span class="step-num">1</span> 剧本分析</div>
                    <div class="step-tab" data-step="2"><span class="step-num">2</span> 场景角色</div>
                    <div class="step-tab active" data-step="3"><span class="step-num">3</span> 分镜生成</div>
                    <div class="step-tab" data-step="4"><span class="step-num">4</span> 配音合成</div>
                    <div class="step-tab" data-step="5"><span class="step-num">5</span> 导出</div>
                </div>
                <div class="layout-btn-group">
                    <div class="view-switch-container" id="viewSwitcher">
                        <div class="view-switch-btn active" id="btn-mode-story" data-mode="storyboard">
                            <svg class="icon-svg" viewBox="0 0 24 24"><path d="M4 8h4V4H4v4zm6 12h4v-4h-4v4zm-6 0h4v-4H4v4zm0-6h4v-4H4v4zm6 0h4v-4h-4v4zm6-10v4h4V4h-4zm-6 4h4V4h-4zm6 6h4v-4h-4zm0 6h4v-4h-4z"/></svg> 分镜
                        </div>
                        <div class="view-switch-btn" id="btn-mode-list" data-mode="list">
                            <svg class="icon-svg" viewBox="0 0 24 24"><path d="M3 13h2v-2H3v2zm0 4h2v-2H3v2zm0-8h2V7H3v2zm4 4h14v-2H7v2zm0 4h14v-2H7v2zM7 7v2h14V7H7z"/></svg> 列表
                        </div>
                    </div>
                    <button class="layout-btn" id="btnMaximize">
                        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M15 3l2.3 2.3-2.89 2.87 1.42 1.42L18.7 6.7 21 9V3h-6zM3 9l2.3-2.3 2.87 2.89 1.42-1.42L6.7 5.3 9 3H3v6zm6 12l-2.3-2.3 2.89-2.87-1.42-1.42L5.3 17.3 3 15v6h6zm12-6l-2.3 2.3-2.87-2.89-1.42 1.42 2.89 2.87L15 21h6v-6z"/></svg>
                    </button>
                    <button class="layout-btn" id="btnToggleRight">
                        <svg class="icon-svg" viewBox="0 0 24 24"><path d="M20 2H4c-1.1 0-2 .9-2 2v16c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM14 20H4V4h10v16zm6 0h-4V4h4v16z"/></svg>
                    </button>
                </div>
            </div>
            <div class="nav-row-sub" id="subNav">
                <div class="sub-tab active">3.1 分镜生成</div>
                <div class="sub-tab">3.2 运镜控制</div>
            </div>
        </div>

        <div class="canvas-area">
            <div id="page-1" class="step-layer">
                <div class="placeholder-text">Step 1: 剧本分析界面</div>
            </div>
            <div id="page-2" class="step-layer">
                <div class="placeholder-text">Step 2: 场景与角色设定</div>
            </div>
            <div id="page-3" class="step-layer active">
                <div class="shot-container mode-storyboard" id="shot-container">
                    <div class="shot-card">
                        <div class="card-preview">
                            <div style="position:absolute; inset:0; background:linear-gradient(45deg, #1a1a1a, #333);"></div>
                            <div class="play-btn" style="z-index:2">▶</div>
                        </div>
                        <div class="card-meta-row">
                            <span class="shot-number">#1 镜头01</span>
                            <span class="shot-time">00:00:00</span>
                        </div>
                        <div class="prompt-box">赛博朋克城市夜景，霓虹灯，湿漉漉的路面...</div>
                        <div class="action-row"><button class="regen-btn">⚡ 重绘</button></div>
                    </div>
                    <div class="shot-card">
                        <div class="card-preview">
                            <div style="position:absolute; inset:0; background:linear-gradient(45deg, #222, #444);"></div>
                            <div class="play-btn" style="z-index:2">▶</div>
                        </div>
                        <div class="card-meta-row">
                            <span class="shot-number">#2 镜头02</span>
                            <span class="shot-time">00:00:04</span>
                        </div>
                        <div class="prompt-box">主角特写...</div>
                        <div class="action-row"><button class="regen-btn">⚡ 重绘</button></div>
                    </div>
                </div>
            </div>
            <div id="page-4" class="step-layer">
                <div class="placeholder-text">Step 4: 配音与音效合成</div>
            </div>
            <div id="page-5" class="step-layer">
                <div class="placeholder-text">Step 5: 视频导出与编码</div>
            </div>
        </div>
    </main>

    <div class="resizer" id="resizerRight"></div>

    <!-- Right Sidebar -->
    <aside class="sidebar-panel" id="sidebarRight" style="width: 280px;">
        <div class="right-tabs">
            <div class="r-tab active" id="rtab-prop" data-panel="prop">属性</div>
            <div class="r-tab" id="rtab-tool" data-panel="tool">工具</div>
        </div>
        <div class="panel-header">检查器</div>
        <div class="panel-content">
            <div id="panel-prop" style="display:block;">
                <div style="margin-bottom:10px; font-weight:bold; color:#e0e0e0;">当前选中: 镜头01</div>
                <div style="margin-bottom:5px;">Prompt</div>
                <textarea style="width:100%; height:80px; background:#0f0f0f; border:1px solid #333; color:#ccc; padding:8px; border-radius:4px; resize:none;">Cyberpunk city...</textarea>
            </div>
            <div id="panel-tool" style="display:none;">
                <button style="width:100%; padding:8px; background:#333; border:1px solid #444; color:#ccc; border-radius:4px; cursor:pointer;">加载 ComfyUI 流程</button>
            </div>
        </div>

        <!-- Generation Panel -->
        <div class="panel-divider"></div>
        <div class="generation-panel" id="genPanel">
            <div class="mode-switch-3" id="gen-mode-switch">
                <div class="ms-opt active" data-mode="0">当前选择</div>
                <div class="ms-opt" data-mode="1">自动补全</div>
                <div class="ms-opt" data-mode="2">全流程</div>
            </div>
            <div class="gen-header">生成设置 (GENERATION SETTINGS)</div>
            <div class="gen-row">
                <div class="gen-col">
                    <label class="gen-label">模型</label>
                    <select class="gen-input">
                        <option>Sora v2 (Cloud)</option>
                        <option>SVD XT (Local)</option>
                    </select>
                </div>
            </div>
            <div id="dynamic-gen-options">
                <div class="gen-row">
                    <div class="gen-col">
                        <label class="gen-label">步数</label>
                        <input type="number" class="gen-input" value="30">
                    </div>
                    <div class="gen-col">
                        <label class="gen-label">CFG</label>
                        <input type="number" class="gen-input" value="7.0">
                    </div>
                </div>
                <div class="gen-row">
                    <div class="gen-col">
                        <label class="gen-label">种子 (Seed)</label>
                        <div style="display:flex; gap:5px;">
                            <input type="text" class="gen-input" value="-1">
                            <div class="dice-btn">🎲</div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="gen-header" style="margin-top:4px;">关联资产 (LINKED ASSETS)</div>
            <div class="tag-container">
                <div class="asset-tag tag-global">Global: CyberStyle_v2</div>
                <div class="asset-tag tag-proj">Proj: Hero_Face</div>
            </div>
            <div style="margin-top:auto;">
                <div class="cost-row"><span>预估消耗:</span><span>$0.04</span></div>
                <button class="gen-btn-big" id="btnGenerate">生成 (GENERATE)</button>
            </div>
        </div>
    </aside>

    <!-- Docker Button -->
    <div class="task-docker" id="taskDocker" title="点击展开任务面板">
        <div class="tide-liquid" id="tideLiquid"></div>
        <div class="docker-num" id="dockerNum">0</div>
    </div>
</div>
