# V0.4.0 Novel-to-Video æ¶æ„è§„èŒƒåŒ–ä¿®æ­£æ–¹æ¡ˆ

> **åˆ›å»ºæ—¶é—´**: 2026-01-07
> **é¢„è®¡å·¥ä½œé‡**: 19-26å°æ—¶ï¼ˆ3-4ä¸ªå·¥ä½œæ—¥ï¼‰
> **æ–¹æ¡ˆç‰ˆæœ¬**: v1.0
> **æ‰§è¡Œè¯´æ˜**: æœ¬æ–¹æ¡ˆå¯ç‹¬ç«‹æ‰§è¡Œï¼Œæ— éœ€é¢å¤–æ¢ç´¢

---
 âŒ å·²åºŸå¼ƒ - æ¶æ„ç†è§£é”™è¯¯

## ğŸ“‹ æ ¸å¿ƒåŸåˆ™ï¼ˆç”¨æˆ·ç¡®è®¤ï¼‰

1. **Provider æ°¸è¿œæ˜¯å…¨å±€çš„**ï¼šæ³¨å†Œåˆ° APIManagerï¼Œæ’ä»¶é€šè¿‡ providerId å¼•ç”¨
2. **æ’ä»¶åªæ˜¯é€»è¾‘ç¼–æ’æ¨¡æ¿**ï¼šä¸åŒ…å« Provider å®ç°ï¼Œåªå«ä¸šåŠ¡é€»è¾‘
3. **èµ„äº§ç®¡ç†åŸºäº project.json**ï¼šæ–‡ä»¶ç³»ç»Ÿæ£€ç´¢ï¼Œæ— å†…å­˜çŠ¶æ€åŒæ­¥
4. **ç»Ÿä¸€ API è°ƒç”¨**ï¼šæœ¬åœ°/è¿œç¨‹ Provider ç»Ÿä¸€ä¸º APIï¼Œç”± APIManager åè°ƒ
5. **ç°åœ¨å°±æŠ½è±¡åŒ–**ï¼šå·¥ä½œæµé¢æ¿è¿ç§»åˆ° PluginPanelConfigï¼Œé¿å…æŠ€æœ¯å€ºåŠ¡

---

## ğŸ¯ å®æ–½ä»»åŠ¡ï¼ˆæŒ‰æ‰§è¡Œé¡ºåºï¼‰

### é˜¶æ®µ1: Provider å…¨å±€åŒ–ï¼ˆ4-6å°æ—¶ï¼‰

#### ä»»åŠ¡1.1: è¿ç§» JiekouAIProvider åˆ°å…¨å±€

**ç›®æ ‡**ï¼šå°†æ’ä»¶å†…çš„ Provider å®ç°è¿ç§»åˆ°å…¨å±€ APIManager

**æºæ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\src\services\providers\JiekouAIProvider.ts
```

**ç›®æ ‡ä½ç½®**ï¼š
```
E:\Projects\Matrix\src\main\services\providers\JiekouAIProvider.ts (æ–°å»ºç›®å½•)
```

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\src\main\services\APIManager.ts`
  - ç¬¬677-776è¡Œï¼š`registerDefaultProviders()` æ–¹æ³•
  - ç¬¬780-789è¡Œï¼š`addProvider()` æ–¹æ³•
- `E:\Projects\Matrix\src\shared\types\api.ts`
  - ç¬¬37-66è¡Œï¼š`APIProviderConfig` æ¥å£å®šä¹‰

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **åˆ›å»ºå…¨å±€ Provider ç›®å½•**ï¼š
   ```bash
   mkdir E:\Projects\Matrix\src\main\services\providers
   ```

2. **è¿ç§» JiekouAIProvider.ts**ï¼š
   - å¤åˆ¶æ–‡ä»¶åˆ°æ–°ä½ç½®
   - **ä¿ç•™**ä»¥ä¸‹éƒ¨åˆ†ï¼š
     - ç¬¬6-39è¡Œï¼š`getProviders()` é™æ€æ–¹æ³•ï¼ˆè¿”å›3ä¸ª APIProviderConfigï¼‰
   - **åˆ é™¤**ä»¥ä¸‹éƒ¨åˆ†ï¼š
     - ç¬¬41-76è¡Œï¼š`textToImage()` é™æ€æ–¹æ³•
     - ç¬¬78-106è¡Œï¼š`imageToImage()` é™æ€æ–¹æ³•
     - ç¬¬108-137è¡Œï¼š`videoGeneration()` é™æ€æ–¹æ³•
   - **æ–°å¢**é€šç”¨ API è°ƒç”¨å°è£…ï¼š
     ```typescript
     export class JiekouAIProvider {
       static async callTextToImage(
         apiKey: string,
         params: { prompt: string; size?: string }
       ): Promise<string> {
         // è¿ç§» textToImage çš„å®ç°é€»è¾‘
       }

       static async checkTaskStatus(
         apiKey: string,
         taskId: string
       ): Promise<TaskStatus> {
         // è¿ç§»ç¬¬126-137è¡Œçš„ä»»åŠ¡çŠ¶æ€æŸ¥è¯¢é€»è¾‘
       }
     }
     ```

3. **åœ¨ APIManager ä¸­æ³¨å†Œ**ï¼š
   - æ‰“å¼€ `E:\Projects\Matrix\src\main\services\APIManager.ts`
   - åœ¨ç¬¬1-13è¡Œçš„æ³¨é‡Šåï¼Œæ·»åŠ å¯¼å…¥ï¼š
     ```typescript
     import { JiekouAIProvider } from './providers/JiekouAIProvider';
     ```
   - åœ¨ç¬¬776è¡Œï¼ˆ`registerDefaultProviders()` æ–¹æ³•ç»“æŸå‰ï¼‰æ’å…¥ï¼š
     ```typescript
     // æ³¨å†Œ Jiekou AI Providers
     const jiekouProviders = JiekouAIProvider.getProviders();
     for (const config of jiekouProviders) {
       this.providers.set(config.id, config);
     }
     await logger.info(
       `Registered ${jiekouProviders.length} Jiekou AI providers`,
       'APIManager'
     );
     ```

4. **åˆ é™¤æ’ä»¶å†…çš„ Provider**ï¼š
   ```bash
   del E:\Projects\Matrix\plugins\official\novel-to-video\src\services\providers\JiekouAIProvider.ts
   rmdir E:\Projects\Matrix\plugins\official\novel-to-video\src\services\providers
   ```

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] `npm run build` æˆåŠŸç¼–è¯‘
- [ ] å¯åŠ¨åº”ç”¨ï¼Œæ‰“å¼€ Settings é¡µé¢
- [ ] æŸ¥çœ‹ Provider åˆ—è¡¨ï¼Œåº”åŒ…å«ï¼š
  - `jiekou-ai-t2i`ï¼ˆæ–‡ç”Ÿå›¾ï¼‰
  - `jiekou-ai-i2i`ï¼ˆå›¾ç”Ÿå›¾ï¼‰
  - `jiekou-ai-video`ï¼ˆè§†é¢‘ç”Ÿæˆï¼‰
- [ ] æµ‹è¯•ç”¨ä¾‹ï¼š
  ```typescript
  // tests/unit/services/APIManager.test.ts
  it('should register Jiekou AI providers', async () => {
    const providers = await apiManager.listProviders({
      category: APICategory.IMAGE_GENERATION
    });
    expect(providers.find(p => p.id === 'jiekou-ai-t2i')).toBeDefined();
  });
  ```

---

#### ä»»åŠ¡1.2: API å¯†é’¥ç®¡ç†è§„èŒƒåŒ–

**ç›®æ ‡**ï¼šæ¶ˆé™¤ç¡¬ç¼–ç çš„ API å¯†é’¥è¯»å–ï¼Œæ”¹ä¸ºé€šè¿‡ APIManager ç®¡ç†

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\src\services\NovelVideoAPIService.ts
```

**éœ€åˆ é™¤çš„ç¡¬ç¼–ç **ï¼š
- ç¬¬471è¡Œï¼š`apiKey: process.env.JIEKOU_API_KEY || ''`

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\src\main\services\APIManager.ts`
  - ç¬¬20è¡Œï¼š`APIKeyEncryption` ç±»å¯¼å…¥
  - ç¬¬38è¡Œï¼š`encryption: APIKeyEncryption` æˆå‘˜å˜é‡
- `E:\Projects\Matrix\src\main\services\ConfigManager.ts`
  - ç¬¬20-48è¡Œï¼š`APIKeyEncryption` ç±»å®Œæ•´å®ç°

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **ä¿®æ”¹ NovelVideoAPIService.ts**ï¼š
   - å®šä½ç¬¬465-474è¡Œï¼ˆ`generateImageToImage` æ–¹æ³•ä¸­çš„ API è°ƒç”¨ï¼‰
   - æ›¿æ¢ä¸ºï¼š
     ```typescript
     // æ—§ä»£ç ï¼ˆç¬¬467-472è¡Œï¼‰ï¼š
     const result = await JiekouAIProvider.imageToImage({
       prompt: params.prompt,
       images: params.images,
       size: params.size,
       apiKey: process.env.JIEKOU_API_KEY || ''  // âŒ åˆ é™¤
     });

     // æ–°ä»£ç ï¼š
     const providerId = 'jiekou-ai-i2i'; // æˆ–é€šè¿‡é…ç½®è·å–
     const provider = await this.apiManager.getProvider(providerId);

     if (!provider?.apiKey) {
       throw new Error(`Provider ${providerId} æœªé…ç½® API å¯†é’¥ï¼Œè¯·åœ¨è®¾ç½®ä¸­æ·»åŠ `);
     }

     const result = await JiekouAIProvider.callImageToImage(provider.apiKey, {
       prompt: params.prompt,
       images: params.images,
       size: params.size
     });
     ```

2. **æœç´¢å¹¶æ›¿æ¢æ‰€æœ‰ç¡¬ç¼–ç **ï¼š
   - åœ¨æ•´ä¸ªæ’ä»¶ç›®å½•ä¸‹æœç´¢ `process.env`ï¼Œç¡®ä¿æ— é—æ¼
   - é¢„æœŸä½ç½®ï¼šä»…åœ¨ NovelVideoAPIService.ts ç¬¬471è¡Œ

3. **æ–°å¢ Settings UIï¼ˆå¯†é’¥é…ç½®ç•Œé¢ï¼‰**ï¼š
   - æ‰“å¼€ `E:\Projects\Matrix\src\renderer\pages\Settings.tsx`
   - åœ¨ Models Tab ä¸­æ–°å¢å¯†é’¥è¾“å…¥å­—æ®µï¼ˆå‚è€ƒå·²æœ‰çš„ ProviderDetailPanelï¼‰
   - è°ƒç”¨ `window.electronAPI.api.updateProviderApiKey(providerId, apiKey)`

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] æœç´¢æ’ä»¶ç›®å½•ï¼Œç¡®è®¤æ—  `process.env.JIEKOU_API_KEY` å‡ºç°
- [ ] åœ¨ Settings ä¸­ä¸º Jiekou AI Provider é…ç½® API å¯†é’¥
- [ ] å¯†é’¥ä¿å­˜åˆ° `config/providers.json`ï¼Œç¡®è®¤å·²åŠ å¯†ï¼š
  ```json
  {
    "id": "jiekou-ai-t2i",
    "apiKey": "eyJhbGciOiJIUzI1NiI...",  // åŠ å¯†åçš„å­—ç¬¦ä¸²
    "_encrypted": "aes-256-gcm"
  }
  ```
- [ ] æ‰§è¡Œå›¾ç‰‡ç”Ÿæˆä»»åŠ¡ï¼ŒéªŒè¯å¯†é’¥æ­£ç¡®ä½¿ç”¨

---

### é˜¶æ®µ2: é…ç½®å»ç¡¬ç¼–ç ï¼ˆ3-4å°æ—¶ï¼‰

#### ä»»åŠ¡2.1: default-config.json å»ç¡¬ç¼–ç 

**ç›®æ ‡**ï¼šç§»é™¤æ‰€æœ‰ç¡¬ç¼–ç çš„ Provider IDï¼Œæ”¹ä¸º category å¼•ç”¨

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\default-config.json
```

**éœ€åˆ é™¤çš„ç¡¬ç¼–ç **ï¼ˆå…±6å¤„ï¼‰ï¼š
- ç¬¬4è¡Œï¼š`"providerId": "openai"`
- ç¬¬10è¡Œï¼š`"providerId": "stability-ai"`
- ç¬¬19è¡Œï¼š`"providerId": "t8star-video"`
- ç¬¬34è¡Œï¼š`"providerId": "jiekou-ai-t2i"`
- ç¬¬38è¡Œï¼š`"providerId": "jiekou-ai-i2i"`
- ç¬¬42è¡Œï¼š`"providerId": "jiekou-ai-video"`

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\docs\Plan\V0.4.0-Nov2Vid-modify-Plan.md`
  - ç¬¬263-279è¡Œï¼šç†æƒ³é…ç½®ç»“æ„

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **å®Œå…¨æ›¿æ¢ default-config.json**ï¼š
   ```json
   {
     "providers": {
       "llm": {
         "category": "LLM",
         "purpose": "ç« èŠ‚æ‹†åˆ†å’Œåœºæ™¯æå–",
         "optional": false,
         "recommendedModels": ["gpt-4", "deepseek-chat"]
       },
       "imageGeneration": {
         "category": "IMAGE_GENERATION",
         "purpose": "åœºæ™¯å›¾ç‰‡ç”Ÿæˆ",
         "optional": false,
         "recommendedModels": ["z-image-turbo", "sd3-large"]
       },
       "videoGeneration": {
         "category": "VIDEO_GENERATION",
         "purpose": "åˆ†é•œè§†é¢‘ç”Ÿæˆ",
         "optional": false,
         "recommendedModels": ["sora-2", "gen3-alpha"]
       },
       "tts": {
         "category": "TTS",
         "purpose": "å¯¹ç™½éŸ³é¢‘ç”Ÿæˆ",
         "optional": true,
         "recommendedModels": ["tts-1", "edge-tts"]
       }
     },
     "workflow": {
       "defaultMode": "full-flow",
       "gates": {
         "stage2": ["characterImages", "sceneImages"],
         "stage3": ["sceneSummaries"],
         "stage4": ["storyboards"]
       }
     }
   }
   ```

2. **éªŒè¯ JSON æ ¼å¼**ï¼š
   - ä½¿ç”¨åœ¨çº¿ JSON éªŒè¯å™¨æ£€æŸ¥æ ¼å¼æ­£ç¡®æ€§
   - ç¡®ä¿æ— è¯­æ³•é”™è¯¯

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] æ‰“å¼€ `default-config.json`ï¼Œæœç´¢ `"providerId"`ï¼Œç»“æœä¸º0
- [ ] `npm run build` æ— é”™è¯¯
- [ ] æ’ä»¶å¯æ­£å¸¸åŠ è½½

---

#### ä»»åŠ¡2.2: NovelVideoAPIService å»ç¡¬åˆ¤æ–­

**ç›®æ ‡**ï¼šç§»é™¤æ‰€æœ‰ `if (providerId === 'xxx')` ç¡¬åˆ¤æ–­ï¼Œæ”¹ä¸ºé€šç”¨ API è°ƒç”¨

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\src\services\NovelVideoAPIService.ts
```

**éœ€åˆ é™¤çš„ç¡¬åˆ¤æ–­ä½ç½®**ï¼ˆå…±4å¤„ï¼‰ï¼š
- ç¬¬167è¡Œï¼š`if (providerId === 't8star-image')`
- ç¬¬254è¡Œï¼š`if (providerId === 't8star-image')`
- ç¬¬343è¡Œï¼š`if (providerId === 't8star-video')`
- ç¬¬429è¡Œï¼š`if (providerId === 'runninghub')`

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\src\main\services\APIManager.ts`
  - ç¬¬200-300è¡Œï¼šé€šç”¨ API è°ƒç”¨æ–¹æ³•ï¼ˆå¦‚æœ‰ï¼‰

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **æ–°å¢ Provider è§£ææ–¹æ³•**ï¼ˆåœ¨ NovelVideoAPIService.ts ç¬¬80è¡Œåæ’å…¥ï¼‰ï¼š
   ```typescript
   /**
    * è§£æ Providerï¼ˆä»é…ç½®çš„ category è·å–å¯ç”¨çš„ Providerï¼‰
    */
   private async resolveProvider(category: APICategory): Promise<string> {
     const providers = await this.apiManager.listProviders({
       category,
       enabledOnly: true
     });

     if (providers.length === 0) {
       throw new Error(`æœªæ‰¾åˆ°å¯ç”¨çš„ ${category} Providerï¼Œè¯·åœ¨è®¾ç½®ä¸­é…ç½®`);
     }

     // è¿”å›ç¬¬ä¸€ä¸ªå¯ç”¨çš„ Providerï¼ˆæœªæ¥å¯æ‰©å±•ä¸ºæ™ºèƒ½é€‰æ‹©ï¼‰
     return providers[0].id;
   }
   ```

2. **æ›¿æ¢ç¬¬167-175è¡Œï¼ˆå›¾åƒç”Ÿæˆç¡¬åˆ¤æ–­ï¼‰**ï¼š
   ```typescript
   // æ—§ä»£ç ï¼ˆç¬¬160-175è¡Œï¼‰ï¼š
   if (!this.pluginConfig.providers.imageGeneration) {
     throw new Error('å›¾åƒç”ŸæˆProvideræœªé…ç½®');
   }
   const { providerId, model, params } = this.pluginConfig.providers.imageGeneration;
   let imageUrl: string;
   if (providerId === 't8star-image') {  // âŒ ç¡¬åˆ¤æ–­
     imageUrl = await this.apiManager.callT8StarImage(prompt, { model, aspectRatio });
   } else {
     throw new Error(`ä¸æ”¯æŒçš„å›¾åƒç”ŸæˆProvider: ${providerId}`);
   }

   // æ–°ä»£ç ï¼š
   const providerId = await this.resolveProvider(APICategory.IMAGE_GENERATION);
   const provider = await this.apiManager.getProvider(providerId);

   const imageUrl = await this.apiManager.callImageGeneration({
     providerId,
     model: provider.models?.[0] || 'default',
     prompt,
     params: { aspectRatio: '16:9' }
   });
   ```

3. **æ›¿æ¢ç¬¬254è¡Œã€343è¡Œã€429è¡Œ**ï¼ˆåŒæ ·é€»è¾‘ï¼‰ï¼š
   - ç»Ÿä¸€ä½¿ç”¨ `resolveProvider(category)` è·å– Provider ID
   - ç»Ÿä¸€ä½¿ç”¨ APIManager çš„é€šç”¨æ–¹æ³•è°ƒç”¨

4. **åˆ é™¤æ—§çš„ hardcoded fallback**ï¼ˆç¬¬99-115è¡Œï¼‰ï¼š
   - åˆ é™¤æ•´ä¸ª fallback é…ç½®å—

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] æœç´¢ `NovelVideoAPIService.ts`ï¼Œç¡®è®¤æ—  `if (providerId === '` å‡ºç°
- [ ] æœç´¢æ–‡ä»¶ï¼Œç¡®è®¤æ— ç¡¬ç¼–ç çš„ Provider ID å­—ç¬¦ä¸²ï¼ˆå¦‚ `'t8star-image'`ï¼‰
- [ ] é›†æˆæµ‹è¯•ï¼š
  ```typescript
  // tests/integration/provider-switching.test.ts
  it('should switch provider without code change', async () => {
    await configManager.setProviderPreference('IMAGE_GENERATION', 't8star-image');
    const result1 = await novelVideoAPI.generateSceneImage(projectId, sceneAssetPath);

    await configManager.setProviderPreference('IMAGE_GENERATION', 'jiekou-ai-t2i');
    const result2 = await novelVideoAPI.generateSceneImage(projectId, sceneAssetPath);

    expect(result1).toBeDefined();
    expect(result2).toBeDefined();
  });
  ```

---

### é˜¶æ®µ3: UI èŒè´£ä¿®å¤ï¼ˆ2-3å°æ—¶ï¼‰

#### ä»»åŠ¡3: PluginConfigTab èŒè´£ä¿®æ­£

**ç›®æ ‡**ï¼šä¿®å¤ PluginConfigTab çš„èŒè´£æ··ä¹±ï¼Œç§»é™¤å…¨å±€ Provider ç®¡ç†é€»è¾‘

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\src\renderer\components\global\tabs\PluginConfigTab.tsx (290è¡Œ)
```

**éœ€åˆ é™¤çš„é”™è¯¯èŒè´£**ï¼š
- ç¬¬55-63è¡Œï¼š`loadProviders()` æ–¹æ³•ï¼ˆåŠ è½½å…¨å±€ Provider åˆ—è¡¨ï¼‰
- ç¬¬221-267è¡Œï¼šProvider è¿‡æ»¤å’Œæ˜¾ç¤ºé€»è¾‘

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\src\renderer\pages\Settings.tsx`
  - Provider ç®¡ç†çš„æ­£ç¡®ä½ç½®ï¼ˆSettings/Models Tabï¼‰

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **åˆ é™¤ loadProviders() æ–¹æ³•**ï¼š
   - åˆ é™¤ç¬¬55-63è¡Œ
   - åˆ é™¤ `providers` stateï¼ˆç¬¬47è¡Œå·¦å³ï¼‰
   - åˆ é™¤ `getCategoryForKey()` è¾…åŠ©æ–¹æ³•ï¼ˆç¬¬221-240è¡Œï¼‰

2. **ä¿®æ”¹ renderProviderField() æ–¹æ³•**ï¼ˆç¬¬241-267è¡Œï¼‰ï¼š
   ```typescript
   // æ—§ä»£ç ï¼ˆæ˜¾ç¤º Provider ä¸‹æ‹‰é€‰æ‹©ï¼‰ï¼š
   const renderProviderField = (key: string, providerConfig: ProviderConfigItem) => {
     const category = getCategoryForKey(key);
     const filteredProviders = providers.filter(p => p.category === category);
     // ... è¿”å› <select> ç»„ä»¶
   };

   // æ–°ä»£ç ï¼ˆä»…æ˜¾ç¤ºéœ€æ±‚è¯´æ˜ï¼‰ï¼š
   const renderProviderField = (key: string, providerConfig: ProviderConfigItem) => {
     return (
       <div className="config-item">
         <label>{providerConfig.purpose}</label>
         <div className="provider-requirement">
           æ‰€éœ€ç±»å‹: {providerConfig.category}
           {providerConfig.optional && <span className="optional-tag">å¯é€‰</span>}
         </div>
         <p className="hint">
           è¯·åœ¨ã€è®¾ç½® - Provider ç®¡ç†ã€‘ä¸­é…ç½® {providerConfig.category} ç±»å‹çš„ Provider
         </p>
       </div>
     );
   };
   ```

3. **Settings é¡µé¢æ–°å¢ Provider ç®¡ç† Tab**ï¼š
   - æ‰“å¼€ `E:\Projects\Matrix\src\renderer\pages\Settings.tsx`
   - åœ¨ Models Tab ä¸­å·²æœ‰ ProviderListPanel å’Œ ProviderDetailPanel
   - ç¡®è®¤åŠŸèƒ½å®Œæ•´ï¼ˆæ·»åŠ ã€ç¼–è¾‘ã€åˆ é™¤ã€å¯ç”¨/ç¦ç”¨ã€è¿æ¥æµ‹è¯•ï¼‰

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] PluginConfigTab.tsx ä¸­ä¸åº”åŒ…å« `listProviders()` è°ƒç”¨
- [ ] ä»£ç è¡Œæ•°ä»290è¡Œé™è‡³~170è¡Œ
- [ ] UI æµ‹è¯•ï¼š
  1. æ‰“å¼€é¡¹ç›®é…ç½® Tabï¼Œåº”åªæ˜¾ç¤ºæ’ä»¶å¯¹ Provider çš„éœ€æ±‚ï¼ˆä¸æ˜¾ç¤ºä¸‹æ‹‰é€‰æ‹©ï¼‰
  2. æ‰“å¼€è®¾ç½®é¡µé¢ Models Tabï¼Œåº”æ˜¾ç¤ºå…¨å±€ Provider ç®¡ç†ç•Œé¢
  3. åœ¨ Settings ä¸­æ·»åŠ æ–° Providerï¼ŒéªŒè¯åœ¨é¡¹ç›®ä¸­å¯ç”¨

---

### é˜¶æ®µ4: æœåŠ¡æ‰©å±•ï¼ˆ4-5å°æ—¶ï¼‰

#### ä»»åŠ¡4.1: StoryboardService æ‰©å±•

**ç›®æ ‡**ï¼šæ–°å¢åœºæ™¯æ‘˜è¦ç”Ÿæˆæ–¹æ³•ï¼Œæ”¯æŒä¸Šä¸‹æ–‡æ‘˜è¦çš„åˆ†é•œè„šæœ¬ç”Ÿæˆ

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\src\services\StoryboardService.ts
```

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\docs\n8n\Nov2Vid_flow_Analysis.md`
  - ç¬¬734-786è¡Œï¼šN8N Stage 2.5 åœºæ™¯æ‘˜è¦å®ç°

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **æ–°å¢ generateSceneSummaries() æ–¹æ³•**ï¼ˆç¬¬150è¡Œåæ’å…¥ï¼‰ï¼š
   ```typescript
   /**
    * Stage 2.5: ç”Ÿæˆåœºæ™¯æ‘˜è¦
    * ä¸ºæ¯ä¸ªåœºæ™¯ç”Ÿæˆ100å­—æ‘˜è¦ï¼Œä¾›åç»­åˆ†é•œè„šæœ¬ç”Ÿæˆä½¿ç”¨
    */
   async generateSceneSummaries(
     projectId: string,
     scenes: SceneAsset[]
   ): Promise<SceneSummary[]> {
     const summaries: SceneSummary[] = [];

     for (const scene of scenes) {
       const prompt = `è¯·ä¸ºä»¥ä¸‹åœºæ™¯ç”Ÿæˆ100å­—å·¦å³çš„æ‘˜è¦ï¼Œçªå‡ºè§†è§‰è¦ç´ å’Œæƒ…æ„Ÿæ°›å›´ï¼š\n\n${scene.description}`;

       const summary = await this.aiService.generateText({
         category: APICategory.LLM,
         messages: [{ role: 'user', content: prompt }],
         maxTokens: 200
       });

       summaries.push({
         sceneId: scene.id,
         summary: summary.text,
         createdAt: await timeService.getISOString()
       });
     }

     return summaries;
   }
   ```

2. **ä¿®æ”¹ generateStoryboard() æ–¹æ³•ç­¾å**ï¼ˆçº¦ç¬¬200è¡Œï¼‰ï¼š
   - åœ¨å‚æ•°åˆ—è¡¨ä¸­æ–°å¢ `previousSummary?` å’Œ `nextSummary?`ï¼š
   ```typescript
   /**
    * ç”Ÿæˆåˆ†é•œè„šæœ¬ï¼ˆæ”¯æŒä¸Šä¸‹æ–‡æ‘˜è¦ï¼‰
    */
   async generateStoryboard(
     projectId: string,
     scene: SceneAsset,
     previousSummary?: string,  // æ–°å¢å‚æ•°
     nextSummary?: string        // æ–°å¢å‚æ•°
   ): Promise<Storyboard> {
     const contextPrompt = previousSummary || nextSummary
       ? `\nã€ä¸Šä¸‹æ–‡å‚è€ƒã€‘\nå‰ä¸€åœºæ™¯: ${previousSummary || 'æ— '}\nåä¸€åœºæ™¯: ${nextSummary || 'æ— '}`
       : '';

     const prompt = `ç”Ÿæˆåœºæ™¯çš„åˆ†é•œè„šæœ¬ï¼š\n${scene.description}${contextPrompt}`;
     // ... ç°æœ‰é€»è¾‘
   }
   ```

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] å•å…ƒæµ‹è¯•ï¼š
  ```typescript
  // tests/unit/services/StoryboardService.test.ts
  it('should generate 100-word summary for each scene', async () => {
    const scenes = [
      { id: 'scene-1', description: 'ä¸»è§’åœ¨æ£®æ—ä¸­è¿·è·¯...' },
      { id: 'scene-2', description: 'å‘ç°ä¸€åº§ç¥ç§˜å¤å ¡...' }
    ];

    const summaries = await storyboardService.generateSceneSummaries(projectId, scenes);

    expect(summaries).toHaveLength(2);
    expect(summaries[0].summary.length).toBeLessThanOrEqual(150);
  });
  ```

---

#### ä»»åŠ¡4.2: ResourceService æ‰©å±•

**ç›®æ ‡**ï¼šæ–°å¢æ‰¹é‡å›¾ç”Ÿå›¾ï¼ˆI2Iï¼‰æ–¹æ³•

**ç›®æ ‡æ–‡ä»¶**ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\src\services\ResourceService.ts
```

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\plugins\official\novel-to-video\src\services\providers\JiekouAIProvider.ts`
  - ç¬¬78-106è¡Œï¼š`imageToImage()` æ–¹æ³•å®ç°ï¼ˆç°å·²è¿ç§»åˆ°å…¨å±€ï¼‰

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **æ–°å¢ generateI2IImages() æ–¹æ³•**ï¼ˆç¬¬200è¡Œåæ’å…¥ï¼‰ï¼š
   ```typescript
   /**
    * æ‰¹é‡å›¾ç”Ÿå›¾ï¼ˆä½¿ç”¨ Jiekou AI I2I APIï¼‰
    */
   async generateI2IImages(
     projectId: string,
     requests: Array<{ prompt: string; referenceImage: string }>
   ): Promise<AssetMetadata[]> {
     const results: AssetMetadata[] = [];

     for (const req of requests) {
       try {
         // è°ƒç”¨å…¨å±€ APIManager çš„ I2I æ–¹æ³•
         const providerId = await this.resolveProvider(APICategory.IMAGE_GENERATION);
         const provider = await this.apiManager.getProvider(providerId);

         const imageUrl = await JiekouAIProvider.callImageToImage(provider.apiKey, {
           prompt: req.prompt,
           images: [req.referenceImage],
           size: '1024*1024'
         });

         // ä¸‹è½½å›¾ç‰‡åˆ°é¡¹ç›®ç›®å½•
         const localPath = await this.downloadAsset(imageUrl, projectId);

         // åˆ›å»ºèµ„äº§å…ƒæ•°æ®
         const asset = await this.assetHelper.createAsset({
           projectId,
           type: AssetType.IMAGE,
           scope: AssetScope.PROJECT,
           filePath: localPath,
           customFields: {
             novelVideo: {
               prompt: req.prompt,
               referenceImage: req.referenceImage,
               generatedAt: await timeService.getISOString()
             }
           }
         });

         results.push(asset);

       } catch (error) {
         await this.logger.error(`I2I generation failed for prompt: ${req.prompt}`, 'ResourceService', { error });
         // å¤±è´¥ä¸ä¸­æ–­ï¼Œç»§ç»­å¤„ç†ä¸‹ä¸€ä¸ª
       }
     }

     return results;
   }
   ```

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] å•å…ƒæµ‹è¯•ï¼š
  ```typescript
  // tests/unit/services/ResourceService.test.ts
  it('should generate images from reference using I2I API', async () => {
    const requests = [
      { prompt: 'å¤œæ™šçš„æ£®æ—', referenceImage: '/path/to/forest.jpg' }
    ];

    const results = await resourceService.generateI2IImages(projectId, requests);

    expect(results).toHaveLength(1);
    expect(results[0].type).toBe(AssetType.IMAGE);
    expect(results[0].customFields.novelVideo.referenceImage).toBe('/path/to/forest.jpg');
  });
  ```

---

### é˜¶æ®µ5: Panel é…ç½®åŒ–ï¼ˆ6-8å°æ—¶ï¼‰

#### ä»»åŠ¡5: å·¥ä½œæµé¢æ¿ JSON é…ç½®åŒ–

**ç›®æ ‡**ï¼šåˆ›å»º 6 ä¸ªå·¥ä½œæµé¢æ¿çš„ PluginPanelConfig JSON é…ç½®

**ç›®æ ‡æ–‡ä»¶**ï¼ˆæ–°å»ºï¼‰ï¼š
```
E:\Projects\Matrix\plugins\official\novel-to-video\panel-configs\
â”œâ”€â”€ chapter-split.json
â”œâ”€â”€ scene-character.json
â”œâ”€â”€ scene-summary.json (æ–°å¢)
â”œâ”€â”€ storyboard.json
â”œâ”€â”€ asset-generation.json
â””â”€â”€ export.json
```

**å‚è€ƒå¯¹è±¡**ï¼š
- `E:\Projects\Matrix\src\renderer\components\PluginPanelRenderer.tsx`
  - ç¬¬1-50è¡Œï¼šPluginPanelRenderer ç»„ä»¶æ¥å£å’Œä½¿ç”¨ç¤ºä¾‹
- `E:\Projects\Matrix\src\shared\types\plugin-panel.ts`
  - ç¬¬1-100è¡Œï¼šPluginPanelConfig ç±»å‹å®šä¹‰
  - ç¬¬11-22è¡Œï¼šFieldType æšä¸¾
  - ç¬¬41-98è¡Œï¼šPanelField æ¥å£

**è¯¦ç»†æ­¥éª¤**ï¼š

1. **åˆ›å»º panel-configs ç›®å½•**ï¼š
   ```bash
   mkdir E:\Projects\Matrix\plugins\official\novel-to-video\panel-configs
   ```

2. **åˆ›å»º chapter-split.json**ï¼ˆåŸºäº ChapterSplitPanel é€»è¾‘ï¼‰ï¼š
   ```json
   {
     "id": "novel-to-video.chapter-split",
     "title": "ç« èŠ‚æ‹†åˆ†",
     "description": "ä½¿ç”¨ AI å°†å°è¯´æ–‡æœ¬æ‹†åˆ†ä¸ºç« èŠ‚å’Œåœºæ™¯",
     "layout": "vertical",
     "fields": [
       {
         "id": "novelText",
         "type": "textarea",
         "label": "å°è¯´æ–‡æœ¬",
         "required": true,
         "placeholder": "ç²˜è´´æˆ–è¾“å…¥å°è¯´æ–‡æœ¬...",
         "help": "å°†è¢«æ‹†åˆ†ä¸ºç« èŠ‚å’Œåœºæ™¯",
         "validation": {
           "minLength": 100,
           "maxLength": 50000
         }
       },
       {
         "id": "artStyle",
         "type": "select",
         "label": "è‰ºæœ¯é£æ ¼",
         "required": true,
         "options": [
           { "value": "realistic", "label": "å†™å®é£æ ¼" },
           { "value": "anime", "label": "åŠ¨æ¼«é£æ ¼" },
           { "value": "watercolor", "label": "æ°´å½©é£æ ¼" }
         ],
         "defaultValue": "realistic"
       }
     ],
     "actions": [
       {
         "id": "generate",
         "label": "å¼€å§‹æ‹†åˆ†",
         "actionType": "submit",
         "variant": "primary",
         "icon": "Zap",
         "handler": "executeChapterSplit"
       }
     ],
     "list": {
       "dataSource": "chapters",
       "emptyText": "å°šæœªç”Ÿæˆç« èŠ‚ï¼Œè¯·å…ˆæ‰§è¡Œæ‹†åˆ†",
       "itemTemplate": {
         "titleField": "title",
         "tagField": "sceneCount",
         "infoField": "summary"
       }
     },
     "hooks": {
       "onSubmit": "handleChapterSplit",
       "onComplete": "loadChaptersToAssetPanel"
     }
   }
   ```

3. **åˆ›å»ºå…¶ä»– 5 ä¸ª JSON æ–‡ä»¶**ï¼ˆç±»ä¼¼ç»“æ„ï¼‰ï¼š
   - `scene-character.json`ï¼šåœºæ™¯å’Œè§’è‰²é¢æ¿é…ç½®
   - `scene-summary.json`ï¼šåœºæ™¯æ‘˜è¦ç”Ÿæˆé¢æ¿é…ç½®ï¼ˆæ–°å¢ï¼‰
   - `storyboard.json`ï¼šåˆ†é•œè„šæœ¬é¢æ¿é…ç½®
   - `asset-generation.json`ï¼šèµ„äº§ç”Ÿæˆé¢æ¿é…ç½®
   - `export.json`ï¼šå¯¼å‡ºé¢æ¿é…ç½®

4. **åˆ›å»º PanelHandler å®ç°**ï¼ˆæ’ä»¶æœåŠ¡å±‚ï¼‰ï¼š
   ```typescript
   // plugins/official/novel-to-video/src/handlers/ChapterSplitHandler.ts
   export class ChapterSplitHandler implements PanelHandler {
     async handleEvent(event: PanelEvent): Promise<void> {
       if (event.type === 'submit' && event.sourceId === 'generate') {
         await this.executeChapterSplit(event.state);
       }
     }

     async validate(state: PanelState): Promise<Record<string, string>> {
       const errors: Record<string, string> = {};
       const novelText = state.values.novelText as string;

       if (!novelText || novelText.length < 100) {
         errors.novelText = 'å°è¯´æ–‡æœ¬è‡³å°‘éœ€è¦100å­—';
       }

       return errors;
     }

     async submit(state: PanelState): Promise<unknown> {
       const { novelText, artStyle } = state.values;
       const result = await chapterService.splitNovelToChapters(
         projectId,
         novelText,
         artStyle
       );
       return result.chapters;
     }
   }
   ```

5. **æš‚æ—¶ä¿ç•™æ—§ Panel ç»„ä»¶**ï¼ˆåŒè½¨å¹¶è¡Œï¼‰ï¼š
   - ä¸åˆ é™¤ç°æœ‰çš„ ChapterSplitPanel.tsx ç­‰ç»„ä»¶
   - åœ¨å·¥ä½œæµç¼–è¾‘å™¨ä¸­å¯é€‰æ‹©ä½¿ç”¨æ–°æ—§ç‰ˆæœ¬

**éªŒè¯æ ‡å‡†**ï¼š
- [ ] JSON é…ç½®éªŒè¯ï¼š
  ```typescript
  // tests/unit/panel-configs/chapter-split.test.ts
  import chapterSplitConfig from '../../../plugins/official/novel-to-video/panel-configs/chapter-split.json';
  import { PluginPanelConfigSchema } from '@/shared/types/plugin-panel';

  it('should validate chapter-split panel config', () => {
    const result = PluginPanelConfigSchema.safeParse(chapterSplitConfig);
    expect(result.success).toBe(true);
  });
  ```
- [ ] æ¸²æŸ“æµ‹è¯•ï¼š
  ```typescript
  it('should render panel from JSON config', () => {
    const { getByText, getByPlaceholderText } = render(
      <PluginPanelRenderer
        config={chapterSplitConfig}
        handler={new ChapterSplitHandler()}
      />
    );

    expect(getByText('ç« èŠ‚æ‹†åˆ†')).toBeInTheDocument();
    expect(getByPlaceholderText('ç²˜è´´æˆ–è¾“å…¥å°è¯´æ–‡æœ¬...')).toBeInTheDocument();
  });
  ```

---

## ğŸ“ å…³é”®æ–‡ä»¶æ¸…å•

### éœ€åˆ é™¤/è¿ç§»
```
plugins/official/novel-to-video/src/services/providers/JiekouAIProvider.ts
â†’ è¿ç§»åˆ° src/main/services/providers/JiekouAIProvider.ts
```

### éœ€ä¿®æ”¹ï¼ˆæ’ä»¶ï¼‰
```
plugins/official/novel-to-video/default-config.json (ç¬¬2-46è¡Œ)
plugins/official/novel-to-video/src/services/NovelVideoAPIService.ts (ç¬¬167, 254, 343, 429, 471è¡Œ)
plugins/official/novel-to-video/src/services/StoryboardService.ts (ç¬¬150è¡Œåæ–°å¢)
plugins/official/novel-to-video/src/services/ResourceService.ts (ç¬¬200è¡Œåæ–°å¢)
```

### éœ€ä¿®æ”¹ï¼ˆä¸»è¿›ç¨‹ï¼‰
```
src/main/services/APIManager.ts (ç¬¬1è¡Œå¯¼å…¥ï¼Œç¬¬776è¡Œæ³¨å†Œ)
src/main/services/providers/JiekouAIProvider.ts (æ–°å»º)
```

### éœ€ä¿®æ”¹ï¼ˆUIï¼‰
```
src/renderer/components/global/tabs/PluginConfigTab.tsx (ç¬¬55-63, 221-267è¡Œåˆ é™¤)
src/renderer/pages/Settings.tsx (ç¡®è®¤ Provider ç®¡ç† Tab å®Œæ•´)
```

### éœ€æ–°å»ºï¼ˆPanel é…ç½®ï¼‰
```
plugins/official/novel-to-video/panel-configs/chapter-split.json
plugins/official/novel-to-video/panel-configs/scene-character.json
plugins/official/novel-to-video/panel-configs/scene-summary.json
plugins/official/novel-to-video/panel-configs/storyboard.json
plugins/official/novel-to-video/panel-configs/asset-generation.json
plugins/official/novel-to-video/panel-configs/export.json
```

---

## âœ… éªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] **N8N å·¥ä½œæµå®Œæ•´æ‰§è¡Œ**ï¼š
  1. è¾“å…¥å°è¯´æ–‡æœ¬ â†’ ç« èŠ‚æ‹†åˆ†æˆåŠŸ
  2. å¹¶è¡Œç”Ÿæˆè§’è‰²å›¾ç‰‡å’Œåœºæ™¯å›¾ç‰‡
  3. ç”Ÿæˆåœºæ™¯æ‘˜è¦ï¼ˆ100å­—å·¦å³ï¼‰
  4. ç”Ÿæˆåˆ†é•œè„šæœ¬ï¼ˆåŒ…å«ä¸Šä¸‹æ–‡ï¼‰
  5. æ‰¹é‡å›¾ç”Ÿå›¾ï¼ˆI2I APIï¼‰
  6. æ‰¹é‡è§†é¢‘ç”Ÿæˆï¼ˆå¼‚æ­¥è½®è¯¢ï¼‰
  7. å¯¼å‡ºæœ€ç»ˆè§†é¢‘

- [ ] **Provider åˆ‡æ¢éªŒè¯**ï¼š
  - Settings ä¸­åˆ‡æ¢ Image Providerï¼ˆt8star â†’ jiekou-aiï¼‰
  - å·¥ä½œæµè‡ªåŠ¨ä½¿ç”¨æ–° Providerï¼Œæ— éœ€ä¿®æ”¹ä»£ç 
  - éªŒè¯ API è°ƒç”¨æ—¥å¿—ä½¿ç”¨æ­£ç¡®çš„ç«¯ç‚¹

- [ ] **API å¯†é’¥ç®¡ç†**ï¼š
  - å¯†é’¥åŠ å¯†å­˜å‚¨åœ¨ `config/providers.json`
  - æ’ä»¶ä»£ç ä¸­æ—  `process.env` ç¡¬ç¼–ç 
  - Settings UI æä¾›å¯†é’¥é…ç½®ç•Œé¢

- [ ] **PluginConfigTab èŒè´£**ï¼š
  - ä»…æ˜¾ç¤ºæ’ä»¶å¯¹ Provider çš„éœ€æ±‚
  - æ— å…¨å±€ Provider åˆ—è¡¨å±•ç¤º
  - Provider ç®¡ç†åŠŸèƒ½åœ¨ Settings ä¸­

- [ ] **Panel é…ç½®åŒ–**ï¼š
  - 6ä¸ª Panel çš„ JSON é…ç½®åˆ›å»ºå¹¶éªŒè¯é€šè¿‡
  - PluginPanelRenderer å¯æ­£ç¡®æ¸²æŸ“
  - åŠŸèƒ½ä¸æ—§ç»„ä»¶ä¸€è‡´

### è´¨é‡éªŒæ”¶
- [ ] `npm run lint` æ— é”™è¯¯å’Œè­¦å‘Š
- [ ] `npm run typecheck` é€šè¿‡
- [ ] `npm test` å…¨éƒ¨é€šè¿‡
- [ ] `npm run build` æˆåŠŸç¼–è¯‘
- [ ] ä»£ç è¦†ç›–ç‡ >80%

### ç«¯åˆ°ç«¯éªŒæ”¶
- [ ] åˆ‡æ¢3æ¬¡ Providerï¼ˆt8star â†’ jiekou-ai â†’ comfyuiï¼‰ï¼Œå·¥ä½œæµæ­£å¸¸
- [ ] UnifiedAssetPanel æ˜¾ç¤º9ç§èµ„äº§åˆ†ç±»ï¼ˆåŒ…æ‹¬åœºæ™¯æ‘˜è¦ã€åˆ†é•œå›¾ã€æœ€ç»ˆè§†é¢‘ï¼‰
- [ ] èµ„äº§å…ƒæ•°æ®åŒ…å« AI ç”Ÿæˆå‚æ•°ï¼ˆpromptã€referenceImage ç­‰ï¼‰
- [ ] ç‰ˆæœ¬ç®¡ç†ï¼šåŒä¸€èµ„äº§å¤šä¸ªç‰ˆæœ¬å¯æŸ¥çœ‹å’Œé€‰æ‹©

---

## ğŸ“ æ–‡æ¡£æ›´æ–°

ä¿®æ­£å®Œæˆåï¼Œæ›´æ–°ä»¥ä¸‹æ–‡æ¡£ï¼š

- [ ] `CHANGELOG.md` - æ–°å¢ v0.4.0 å˜æ›´è®°å½•
- [ ] `docs/Plan/V0.4.0-Nov2Vid-modify-Plan.md` - æ ‡è®°ä¸º"å·²å®Œæˆ"
- [ ] `plugins/official/novel-to-video/README.md` - æ›´æ–°ä½¿ç”¨è¯´æ˜
- [ ] æ–°å¢ `docs/guides/provider-migration-guide.md` - è¿ç§»æŒ‡å—

---

## â±ï¸ é¢„è®¡å·¥ä½œé‡

| é˜¶æ®µ | ä»»åŠ¡ | é¢„è®¡æ—¶é—´ |
|-----|------|---------|
| é˜¶æ®µ1 | Provider å…¨å±€åŒ– | 4-6å°æ—¶ |
| é˜¶æ®µ2 | é…ç½®å»ç¡¬ç¼–ç  | 3-4å°æ—¶ |
| é˜¶æ®µ3 | UI èŒè´£ä¿®å¤ | 2-3å°æ—¶ |
| é˜¶æ®µ4 | æœåŠ¡æ‰©å±• | 4-5å°æ—¶ |
| é˜¶æ®µ5 | Panel é…ç½®åŒ– | 6-8å°æ—¶ |
| **æ€»è®¡** | **å…¨éƒ¨ä»»åŠ¡** | **19-26å°æ—¶ï¼ˆ3-4ä¸ªå·¥ä½œæ—¥ï¼‰** |

---

**æ‰§è¡Œå»ºè®®**ï¼š
1. ä¸¥æ ¼æŒ‰ç…§é˜¶æ®µé¡ºåºæ‰§è¡Œï¼Œæ¯å®Œæˆä¸€ä¸ªé˜¶æ®µç«‹å³éªŒæ”¶
2. æ¯ä¸ªä»»åŠ¡æ‰§è¡Œå‰ï¼Œå…ˆé˜…è¯»"å‚è€ƒå¯¹è±¡"ä¸­çš„ä»£ç ï¼Œç†è§£ç°æœ‰å®ç°
3. ä¿®æ”¹ä»£ç æ—¶ï¼Œç²¾ç¡®å®šä½åˆ°æŒ‡å®šçš„è¡Œå·ï¼Œé¿å…è¯¯æ”¹å…¶ä»–é€»è¾‘
4. æ¯ä¸ªé˜¶æ®µå®Œæˆåï¼Œè¿è¡Œ `npm run build` å’Œ `npm test` ç¡®ä¿æ— é”™è¯¯
5. é‡åˆ°é—®é¢˜æ—¶ï¼Œå‚è€ƒ"éªŒè¯æ ‡å‡†"ä¸­çš„æµ‹è¯•ç”¨ä¾‹è¿›è¡Œè°ƒè¯•

**æ–¹æ¡ˆå®Œæˆæ ‡å¿—**ï¼š
- âœ… æ‰€æœ‰éªŒæ”¶æ ‡å‡†é€šè¿‡
- âœ… N8N å·¥ä½œæµå®Œæ•´å¯ç”¨
- âœ… Provider å¯è‡ªç”±åˆ‡æ¢
- âœ… ä»£ç æ— ç¡¬ç¼–ç 
- âœ… æ–‡æ¡£å·²æ›´æ–°
